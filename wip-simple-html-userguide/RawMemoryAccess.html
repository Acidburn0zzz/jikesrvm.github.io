<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Raw Memory Access</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2 --> 
<meta name="src" content="index.tex"> 
<meta name="date" content="2015-06-07 17:17:00"> 
<link rel="stylesheet" type="text/css" href="index.css"> 
</head><body 
>
<!--l. 2--><div class="crosslinks"><p class="noindent">[<a 
href="OptTestHarness.html" >next</a>] [<a 
href="Magic.html" >prev</a>] [<a 
href="Magic.html#tailMagic.html" >prev-tail</a>] [<a 
href="#tailRawMemoryAccess.html">tail</a>] [<a 
href="index.html#RawMemoryAccess.html" >up</a>] </p></div>
<h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x3-20002"></a>Raw Memory Access</h3>
<!--l. 5--><p class="noindent" >The type <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">org.vmmagic.Address</span></span></span> is used to represent a machine-dependent address
type. <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">org.vmmagic.Address</span></span></span> is an unboxed type. In the past, the base type <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">int</span></span></span> was
used to represent addresses but this approach had several shortcomings. First, the
lack of abstraction makes porting nightmarish. Equally important is that Java type
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">int</span></span></span> is signed whereas addresses are more appropriately considered unsigned. The
difference is problematic since an unsigned comparison on <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">int</span></span></span> is inexpressible in the
Java programming language.
<!--l. 7--><p class="noindent" >To overcome these problems, instances of <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">org.vmmagic.Address</span></span></span> are used to
represent addresses. The class supports the expected well-typed methods like adding
an integer offset to an address to obtain another address, computing the
difference of two addresses, and comparing addresses. Other operations that
make sense on <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">int</span></span></span> but not on addresses are excluded like multiplication of
addresses. Two methods deserve special attention: converting an address
into an integer and the inverse. These methods should be avoided where
possible.
<!--l. 9--><p class="noindent" >Without special intervention, using a Java object to represent an address would be at
best abysmally inefficient. Instead, when the Jikes RVM compiler encounters creation
of an address object, it will return the primitive value that represents an address for
that platform. Currently, the address type maps to either a 32-bit or 64-bit unsigned
integer. Since an address is an unboxed type it must obey the rules outlined in
Unboxed Types.
                                                                  

                                                                  
<!--l. 2--><div class="crosslinks"><p class="noindent">[<a 
href="OptTestHarness.html" >next</a>] [<a 
href="Magic.html" >prev</a>] [<a 
href="Magic.html#tailMagic.html" >prev-tail</a>] [<a 
href="RawMemoryAccess.html" >front</a>] [<a 
href="index.html#RawMemoryAccess.html" >up</a>] </p></div>
<!--l. 2--><p class="noindent" ><a 
 id="tailRawMemoryAccess.html"></a> 
</body></html> 
