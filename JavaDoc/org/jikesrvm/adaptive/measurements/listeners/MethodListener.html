<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>MethodListener (Jikes RVM API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MethodListener (Jikes RVM API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MethodListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html" title="class in org.jikesrvm.adaptive.measurements.listeners"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/NullListener.html" title="class in org.jikesrvm.adaptive.measurements.listeners"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/jikesrvm/adaptive/measurements/listeners/MethodListener.html" target="_top">Frames</a></li>
<li><a href="MethodListener.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jikesrvm.adaptive.measurements.listeners</div>
<h2 title="Class MethodListener" class="title">Class MethodListener</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html" title="class in org.jikesrvm.adaptive.measurements.listeners">org.jikesrvm.adaptive.measurements.listeners.Listener</a></li>
<li>
<ul class="inheritance">
<li>org.jikesrvm.adaptive.measurements.listeners.MethodListener</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.31">MethodListener</a>
extends <a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html" title="class in org.jikesrvm.adaptive.measurements.listeners">Listener</a></pre>
<div class="block">A MethodListener defines a listener to collect method invocation samples.
 <p>
 Samples are collected in a buffer.
 When sampleSize samples have been collected
 the listener's organizer is activated to process them.
 <p>
 Defines update's interface to be a compiled method identifier, CMID.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#numSamples">numSamples</a></strong></code>
<div class="block">Number of samples taken so far</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#samples">samples</a></strong></code>
<div class="block">The sample buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#sampleSize">sampleSize</a></strong></code>
<div class="block">Number of samples to be gathered before they are processed</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#MethodListener(int)">MethodListener</a></strong>(int&nbsp;sampleSize)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#getNumSamples()">getNumSamples</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#getSamples()">getSamples</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#recordSample(int)">recordSample</a></strong>(int&nbsp;CMID)</code>
<div class="block">This method records a sample containing the <code>CMID</code> (compiled method ID)
 passed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#report()">report</a></strong>()</code>
<div class="block">Entry point to dump what has been collected.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#reset()">reset</a></strong>()</code>
<div class="block">Reset the listeners data structures in preparation of a new sampling
 window.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#update(int,%20int,%20int)">update</a></strong>(int&nbsp;cmid,
            int&nbsp;callerCmid,
            int&nbsp;whereFrom)</code>
<div class="block">This method is called when a sample is taken.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.jikesrvm.adaptive.measurements.listeners.Listener">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.jikesrvm.adaptive.measurements.listeners.<a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html" title="class in org.jikesrvm.adaptive.measurements.listeners">Listener</a></h3>
<code><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#activate()">activate</a>, <a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#activateOrganizer()">activateOrganizer</a>, <a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#isActive()">isActive</a>, <a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#passivate()">passivate</a>, <a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#setOrganizer(org.jikesrvm.adaptive.measurements.organizers.Organizer)">setOrganizer</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="sampleSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sampleSize</h4>
<pre>int <a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.36">sampleSize</a></pre>
<div class="block">Number of samples to be gathered before they are processed</div>
</li>
</ul>
<a name="numSamples">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numSamples</h4>
<pre>int <a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.41">numSamples</a></pre>
<div class="block">Number of samples taken so far</div>
</li>
</ul>
<a name="samples">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>samples</h4>
<pre>int[] <a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.47">samples</a></pre>
<div class="block">The sample buffer.
 Key Invariant: <code>samples.length &gt;= sampleSize</code></div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MethodListener(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MethodListener</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.52">MethodListener</a>(int&nbsp;sampleSize)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sampleSize</code> - the initial sampleSize for the listener</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="update(int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.73">update</a>(int&nbsp;cmid,
          int&nbsp;callerCmid,
          int&nbsp;whereFrom)</pre>
<div class="block">This method is called when a sample is taken.
 It parameter <code>cmid</code> represents the compiled method ID of the method
 which was executing at the time of the sample.  This method
 bumps the counter and checks whether a threshold is reached.
 <p>
 NOTE: There can be multiple threads executing this method at the
       same time. We attempt to ensure that the resulting race conditions
       are safely handled, but make no guarentee that every sample is
       actually recorded.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cmid</code> - the compiled method ID to update</dd><dd><code>callerCmid</code> - a compiled method id for the caller, -1 if none</dd><dd><code>whereFrom</code> - Was this a yieldpoint in a PROLOGUE, BACKEDGE, or
         EPILOGUE?</dd></dl>
</li>
</ul>
<a name="recordSample(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordSample</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.115">recordSample</a>(int&nbsp;CMID)</pre>
<div class="block">This method records a sample containing the <code>CMID</code> (compiled method ID)
 passed.  Since multiple threads may be taking samples concurrently,
 we use fetchAndAdd to distribute indices into the buffer AND to record
 when a sample is taken.  (Thread 1 may get an earlier index, but complete
 the insertion after Thread 2.)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>CMID</code> - compiled method ID to record</dd></dl>
</li>
</ul>
<a name="report()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>report</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.129">report</a>()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#report()">Listener</a></code></strong></div>
<div class="block">Entry point to dump what has been collected.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#report()">report</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html" title="class in org.jikesrvm.adaptive.measurements.listeners">Listener</a></code></dd>
</dl>
</li>
</ul>
<a name="reset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.132">reset</a>()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#reset()">Listener</a></code></strong></div>
<div class="block">Reset the listeners data structures in preparation of a new sampling
 window. This is called by the organizer after processing the samples
 from the old sampling window.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html#reset()">reset</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html" title="class in org.jikesrvm.adaptive.measurements.listeners">Listener</a></code></dd>
</dl>
</li>
</ul>
<a name="getSamples()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSamples</h4>
<pre>public&nbsp;int[]&nbsp;<a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.139">getSamples</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the buffer of samples</dd></dl>
</li>
</ul>
<a name="getNumSamples()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getNumSamples</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/jikesrvm/adaptive/measurements/listeners/MethodListener.html#line.144">getNumSamples</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>how many samples in the array returned by getSamples are valid</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MethodListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/Listener.html" title="class in org.jikesrvm.adaptive.measurements.listeners"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/jikesrvm/adaptive/measurements/listeners/NullListener.html" title="class in org.jikesrvm.adaptive.measurements.listeners"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/jikesrvm/adaptive/measurements/listeners/MethodListener.html" target="_top">Frames</a></li>
<li><a href="MethodListener.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
