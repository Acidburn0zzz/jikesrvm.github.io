<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ScanThread (Jikes RVM API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ScanThread (Jikes RVM API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":9,"i13":10,"i14":10,"i15":10,"i16":9,"i17":9,"i18":10,"i19":10,"i20":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ScanThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jikesrvm/mm/mmtk/ScanStatics.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/jikesrvm/mm/mmtk/Statistics.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jikesrvm/mm/mmtk/ScanThread.html" target="_top">Frames</a></li>
<li><a href="ScanThread.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jikesrvm.mm.mmtk</div>
<h2 title="Class ScanThread" class="title">Class ScanThread</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.jikesrvm.mm.mmtk.ScanThread</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.82">ScanThread</a>
extends <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Class that supports scanning thread stacks for references during
 collections. References are located using GCMapIterators and are
 inserted into a set of root locations.  Optionally, a set of
 interior pointer locations associated with the object is created.<p>

 Threads, stacks, jni environments, and register objects have a
 complex interaction in terms of scanning.  The operation of
 scanning the stack reveals not only roots inside the stack but also
 the state of the register objects's gprs and the JNI refs array.
 They are all associated via the thread object, making it natural
 for scanThread to be considered a single operation with the method
 directly accessing these objects via the thread object's
 fields. <p>

 One pitfall occurs when scanning the thread object (plus
 dependents) when not all of the objects have been copied.  Then it
 may be that the innards of the register object has not been copied
 while the stack object has.  The result is that an inconsistent set
 of slots is reported.  In this case, the copied register object may
 not be correct if the copy occurs after the root locations are
 discovered but before those locations are processed. In essence,
 all of these objects form one logical unit but are physically
 separated so that sometimes only part of it has been copied causing
 the scan to be incorrect. <p>

 The caller of the stack scanning routine must ensure that all of
 these components's descendants are consistent (all copied) when
 this method is called. <p>

 <i>Code locations:</i> Identifying pointers <i>into</i> code
 objects is essential if code objects are allowed to move (and if
 the code objects were not otherwise kept alive, it would be
 necessary to ensure the liveness of the code objects). A code
 pointer is the only case in which we have interior pointers
 (pointers into the inside of objects).  For such pointers, two
 things must occur: first the pointed to object must be kept alive,
 and second, if the pointed to object is moved by a copying
 collector, the pointer into the object must be adjusted so it now
 points into the newly copied object</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/jikesrvm/compilers/common/CompiledMethod.html" title="class in org.jikesrvm.compilers.common">CompiledMethod</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#compiledMethod">compiledMethod</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#compiledMethodType">compiledMethodType</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#DEFAULT_VERBOSITY">DEFAULT_VERBOSITY</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#failed">failed</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#FAILURE_VERBOSITY">FAILURE_VERBOSITY</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#fp">fp</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#initialIPLoc">initialIPLoc</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#ip">ip</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/jikesrvm/mm/mminterface/GCMapIterator.html" title="class in org.jikesrvm.mm.mminterface">GCMapIterator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#iterator">iterator</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/jikesrvm/mm/mminterface/GCMapIteratorGroup.html" title="class in org.jikesrvm.mm.mminterface">GCMapIteratorGroup</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#iteratorGroup">iteratorGroup</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#prevFp">prevFp</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#processCodeLocations">processCodeLocations</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#reinstallReturnBarrier">reinstallReturnBarrier</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#thread">thread</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#topFrame">topFrame</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#trace">trace</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#VALIDATE_REFS">VALIDATE_REFS</a></span></code>
<div class="block">quietly validates each ref reported by map iterators</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#ScanThread--">ScanThread</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#assertImmovableInCurrentCollection--">assertImmovableInCurrentCollection</a></span>()</code>
<div class="block">Assert that the stack is immovable.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#checkReference-org.vmmagic.unboxed.Address-">checkReference</a></span>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;refaddr)</code>
<div class="block">Check that a reference encountered during scanning is valid.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#checkReference-org.vmmagic.unboxed.Address-int-">checkReference</a></span>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;refaddr,
              int&nbsp;verbosity)</code>
<div class="block">Check that a reference encountered during scanning is valid.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#dumpRef-org.vmmagic.unboxed.Address-int-">dumpRef</a></span>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;refaddr,
       int&nbsp;verbosity)</code>
<div class="block">Print out information associated with a reference.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#dumpStackFrame-int-">dumpStackFrame</a></span>(int&nbsp;verbosity)</code>
<div class="block">Dump the contents of a stack frame.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#dumpTopFrameInfo-int-">dumpTopFrameInfo</a></span>(int&nbsp;verbosity)</code>
<div class="block">Print out the basic information associated with the top frame on
 the stack.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#getHWExceptionRegisters--">getHWExceptionRegisters</a></span>()</code>
<div class="block">When an exception occurs, registers are saved temporarily.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#printMethod-org.jikesrvm.classloader.RVMMethod-">printMethod</a></span>(<a href="../../../../org/jikesrvm/classloader/RVMMethod.html" title="class in org.jikesrvm.classloader">RVMMethod</a>&nbsp;m)</code>
<div class="block">Print out the name of a method</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#printMethodHeader--">printMethodHeader</a></span>()</code>
<div class="block">Print out the method header for the method associated with the
 current frame</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#processCodeLocation-org.vmmagic.unboxed.ObjectReference-org.vmmagic.unboxed.Address-">processCodeLocation</a></span>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;code,
                   <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;ipLoc)</code>
<div class="block">Push a code pointer location onto the code locations deque,
 optionally performing a sanity check first.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#processFrameForCode-int-">processFrameForCode</a></span>(int&nbsp;verbosity)</code>
<div class="block">Identify all pointers into code pointers associated with a frame.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#pushFrameIP-org.vmmagic.unboxed.ObjectReference-int-">pushFrameIP</a></span>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;code,
           int&nbsp;verbosity)</code>
<div class="block">Push the instruction pointer associated with this frame onto the
 code locations deque.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#reportDelayedRootEdge-org.mmtk.plan.TraceLocal-org.vmmagic.unboxed.Address-">reportDelayedRootEdge</a></span>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                     <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;addr)</code>
<div class="block">Wrapper for <a href="../../../../org/mmtk/plan/TraceLocal.html#reportDelayedRootEdge-org.vmmagic.unboxed.Address-"><code>TraceLocal.reportDelayedRootEdge(Address)</code></a> that allows
 sanity checking of the address.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#scanFrame-int-">scanFrame</a></span>(int&nbsp;verbosity)</code>
<div class="block">Scan the current stack frame.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#scanFrameForCode-org.vmmagic.unboxed.ObjectReference-">scanFrameForCode</a></span>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;code)</code>
<div class="block">Scan this frame for internal code pointers.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#scanFrameForObjects-int-">scanFrameForObjects</a></span>(int&nbsp;verbosity)</code>
<div class="block">Identify all the object pointers stored as local variables
 associated with (though not necessarily strictly within!)</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#scanThread-org.jikesrvm.scheduler.RVMThread-org.mmtk.plan.TraceLocal-boolean-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-boolean-">scanThread</a></span>(<a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;thread,
          <a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
          boolean&nbsp;processCodeLocations,
          <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;gprs,
          <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;topFrame,
          boolean&nbsp;newRootsSufficent)</code>
<div class="block">A more general interface to thread scanning, which permits the
 scanning of stack segments which are dislocated from the thread
 structure.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#scanThread-org.jikesrvm.scheduler.RVMThread-org.mmtk.plan.TraceLocal-boolean-boolean-">scanThread</a></span>(<a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;thread,
          <a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
          boolean&nbsp;processCodeLocations,
          boolean&nbsp;newRootsSufficient)</code>
<div class="block">Scan a thread, placing the addresses of pointers into supplied buffers.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#scanThreadInternal-org.vmmagic.unboxed.Address-int-org.vmmagic.unboxed.Address-">scanThreadInternal</a></span>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;gprs,
                  int&nbsp;verbosity,
                  <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;sentinelFp)</code>
<div class="block">The main stack scanning loop.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#setUpFrame-int-">setUpFrame</a></span>(int&nbsp;verbosity)</code>
<div class="block">Set up to scan the current stack frame.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ScanThread.html#startScan-org.mmtk.plan.TraceLocal-boolean-org.jikesrvm.scheduler.RVMThread-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-">startScan</a></span>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
         boolean&nbsp;processCodeLocations,
         <a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;thread,
         <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;gprs,
         <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;ip,
         <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;fp,
         <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;initialIPLoc,
         <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;topFrame,
         <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;sentinelFp)</code>
<div class="block">Initializes a ScanThread instance, and then scans a stack
 associated with a thread, and places references in deques (one for
 object pointers, one for interior code pointers).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="VALIDATE_REFS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>VALIDATE_REFS</h4>
<pre>static final&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.90">VALIDATE_REFS</a></pre>
<div class="block">quietly validates each ref reported by map iterators</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ScanThread.VALIDATE_REFS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_VERBOSITY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_VERBOSITY</h4>
<pre>private static final&nbsp;int <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.97">DEFAULT_VERBOSITY</a></pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ScanThread.DEFAULT_VERBOSITY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="FAILURE_VERBOSITY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FAILURE_VERBOSITY</h4>
<pre>private static final&nbsp;int <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.98">FAILURE_VERBOSITY</a></pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ScanThread.FAILURE_VERBOSITY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="iteratorGroup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iteratorGroup</h4>
<pre>private final&nbsp;<a href="../../../../org/jikesrvm/mm/mminterface/GCMapIteratorGroup.html" title="class in org.jikesrvm.mm.mminterface">GCMapIteratorGroup</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.108">iteratorGroup</a></pre>
</li>
</ul>
<a name="iterator">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iterator</h4>
<pre>private&nbsp;<a href="../../../../org/jikesrvm/mm/mminterface/GCMapIterator.html" title="class in org.jikesrvm.mm.mminterface">GCMapIterator</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.110">iterator</a></pre>
</li>
</ul>
<a name="trace">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trace</h4>
<pre>private&nbsp;<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.112">trace</a></pre>
</li>
</ul>
<a name="processCodeLocations">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processCodeLocations</h4>
<pre>private&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.113">processCodeLocations</a></pre>
</li>
</ul>
<a name="thread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>thread</h4>
<pre>private&nbsp;<a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.115">thread</a></pre>
</li>
</ul>
<a name="ip">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ip</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.116">ip</a></pre>
</li>
</ul>
<a name="fp">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fp</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.116">fp</a></pre>
</li>
</ul>
<a name="prevFp">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prevFp</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.116">prevFp</a></pre>
</li>
</ul>
<a name="initialIPLoc">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialIPLoc</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.116">initialIPLoc</a></pre>
</li>
</ul>
<a name="topFrame">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>topFrame</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.116">topFrame</a></pre>
</li>
</ul>
<a name="compiledMethod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compiledMethod</h4>
<pre>private&nbsp;<a href="../../../../org/jikesrvm/compilers/common/CompiledMethod.html" title="class in org.jikesrvm.compilers.common">CompiledMethod</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.118">compiledMethod</a></pre>
</li>
</ul>
<a name="compiledMethodType">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compiledMethodType</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.119">compiledMethodType</a></pre>
</li>
</ul>
<a name="failed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>failed</h4>
<pre>private&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.120">failed</a></pre>
</li>
</ul>
<a name="reinstallReturnBarrier">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>reinstallReturnBarrier</h4>
<pre>private&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.121">reinstallReturnBarrier</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ScanThread--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ScanThread</h4>
<pre>public&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.82">ScanThread</a>()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="scanThread-org.jikesrvm.scheduler.RVMThread-org.mmtk.plan.TraceLocal-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanThread</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.136">scanThread</a>(<a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;thread,
                              <a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                              boolean&nbsp;processCodeLocations,
                              boolean&nbsp;newRootsSufficient)</pre>
<div class="block">Scan a thread, placing the addresses of pointers into supplied buffers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>thread</code> - The thread to be scanned</dd>
<dd><code>trace</code> - The trace instance to use for reporting references.</dd>
<dd><code>processCodeLocations</code> - Should code locations be processed?</dd>
<dd><code>newRootsSufficient</code> - Is a partial stack scan sufficient, or must we do a full scan?</dd>
</dl>
</li>
</ul>
<a name="reportDelayedRootEdge-org.mmtk.plan.TraceLocal-org.vmmagic.unboxed.Address-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reportDelayedRootEdge</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.162">reportDelayedRootEdge</a>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                                          <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;addr)</pre>
<div class="block">Wrapper for <a href="../../../../org/mmtk/plan/TraceLocal.html#reportDelayedRootEdge-org.vmmagic.unboxed.Address-"><code>TraceLocal.reportDelayedRootEdge(Address)</code></a> that allows
 sanity checking of the address.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>trace</code> - the trace on which <a href="../../../../org/mmtk/plan/TraceLocal.html#reportDelayedRootEdge-org.vmmagic.unboxed.Address-"><code>TraceLocal.reportDelayedRootEdge(Address)</code></a>
  will be called</dd>
<dd><code>addr</code> - see JavaDoc of <a href="../../../../org/mmtk/plan/TraceLocal.html#reportDelayedRootEdge-org.vmmagic.unboxed.Address-"><code>TraceLocal.reportDelayedRootEdge(Address)</code></a></dd>
</dl>
</li>
</ul>
<a name="scanThread-org.jikesrvm.scheduler.RVMThread-org.mmtk.plan.TraceLocal-boolean-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanThread</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.181">scanThread</a>(<a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;thread,
                               <a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                               boolean&nbsp;processCodeLocations,
                               <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;gprs,
                               <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;topFrame,
                               boolean&nbsp;newRootsSufficent)</pre>
<div class="block">A more general interface to thread scanning, which permits the
 scanning of stack segments which are dislocated from the thread
 structure.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>thread</code> - The thread to be scanned</dd>
<dd><code>trace</code> - The trace instance to use for reporting references.</dd>
<dd><code>processCodeLocations</code> - Should code locations be processed?</dd>
<dd><code>gprs</code> - The general purpose registers associated with the
 stack being scanned (normally extracted from the thread).</dd>
<dd><code>topFrame</code> - The top frame of the stack being scanned, or zero
 if this is to be inferred from the thread (normally the case).</dd>
<dd><code>newRootsSufficent</code> - Is a partial stack scan sufficient, or must we do a full scan?</dd>
</dl>
</li>
</ul>
<a name="startScan-org.mmtk.plan.TraceLocal-boolean-org.jikesrvm.scheduler.RVMThread-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-org.vmmagic.unboxed.Address-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startScan</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.241">startScan</a>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                       boolean&nbsp;processCodeLocations,
                       <a href="../../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;thread,
                       <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;gprs,
                       <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;ip,
                       <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;fp,
                       <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;initialIPLoc,
                       <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;topFrame,
                       <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;sentinelFp)</pre>
<div class="block">Initializes a ScanThread instance, and then scans a stack
 associated with a thread, and places references in deques (one for
 object pointers, one for interior code pointers).  If the thread
 scan fails, the thread is rescanned verbosely and a failure
 occurs.<p>

 The various state associated with stack scanning is captured by
 instance variables of this type, which are initialized here.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>trace</code> - The trace instance to use for reporting locations.</dd>
<dd><code>processCodeLocations</code> - whether to process parts of the thread
  that could point to code (e.g. exception registers).</dd>
<dd><code>thread</code> - Thread for the thread whose stack is being scanned</dd>
<dd><code>gprs</code> - The general purpose registers associated with the
 stack being scanned (normally extracted from the thread).</dd>
<dd><code>ip</code> - The instruction pointer for the top frame of the stack
 we're about to scan.</dd>
<dd><code>fp</code> - The frame pointer for the top frame of the stack we're
 about to scan.</dd>
<dd><code>initialIPLoc</code> - the address of the initial location of the instruction
  pointer</dd>
<dd><code>topFrame</code> - The top frame of the stack being scanned, or zero
 if this is to be inferred from the thread (normally the case).</dd>
<dd><code>sentinelFp</code> - The frame pointer at which the stack scan should stop.</dd>
</dl>
</li>
</ul>
<a name="scanThreadInternal-org.vmmagic.unboxed.Address-int-org.vmmagic.unboxed.Address-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanThreadInternal</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.276">scanThreadInternal</a>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;gprs,
                                int&nbsp;verbosity,
                                <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;sentinelFp)</pre>
<div class="block">The main stack scanning loop.<p>

 Walk the stack one frame at a time, top (lo) to bottom (hi),<p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gprs</code> - The general purpose registers associated with the
 stack being scanned (normally extracted from the thread).</dd>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
<dd><code>sentinelFp</code> - the frame pointer at which the stack scan should stop</dd>
</dl>
</li>
</ul>
<a name="getHWExceptionRegisters--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHWExceptionRegisters</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.333">getHWExceptionRegisters</a>()</pre>
<div class="block">When an exception occurs, registers are saved temporarily.  If
 the stack being scanned is in this state, we need to scan those
 registers for code pointers.  If the codeLocations deque is null,
 then scanning for code pointers is not required, so we don't need
 to do anything. (SB: Why only code pointers?).
 <p>
 Dave G:  The contents of the GPRs of the exceptionRegisters
 are handled during normal stack scanning
 (@see org.jikesrvm.runtime.compilers.common.HardwareTrapCompiledMethod.
 It looks to me like the main goal of this method is to ensure that the
 method in which the trap happened isn't treated as dead code and collected
 (if it's been marked as obsolete, we are setting its activeOnStackFlag below).</div>
</li>
</ul>
<a name="processCodeLocation-org.vmmagic.unboxed.ObjectReference-org.vmmagic.unboxed.Address-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processCodeLocation</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.358">processCodeLocation</a>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;code,
                                 <a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;ipLoc)</pre>
<div class="block">Push a code pointer location onto the code locations deque,
 optionally performing a sanity check first.<p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>code</code> - The code object into which this interior pointer points</dd>
<dd><code>ipLoc</code> - The location of the pointer into this code object</dd>
</dl>
</li>
</ul>
<a name="scanFrame-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanFrame</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.393">scanFrame</a>(int&nbsp;verbosity)</pre>
<div class="block">Scan the current stack frame.<p>

 First the various iterators are set up, then the frame is scanned
 for regular pointers, before scanning for code pointers.  The
 iterators are then cleaned up, and native frames skipped if
 necessary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the frame pointer of the frame that was just scanned</dd>
</dl>
</li>
</ul>
<a name="setUpFrame-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUpFrame</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.433">setUpFrame</a>(int&nbsp;verbosity)</pre>
<div class="block">Set up to scan the current stack frame.  This means examining the
 frame to discover the method being invoked and then retrieving
 the associated metadata (stack maps etc).  Certain frames should
 not be scanned---these are identified and skipped.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the frame should be scanned, false if it should
 be skipped.</dd>
</dl>
</li>
</ul>
<a name="scanFrameForObjects-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanFrameForObjects</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.481">scanFrameForObjects</a>(int&nbsp;verbosity)</pre>
<div class="block">Identify all the object pointers stored as local variables
 associated with (though not necessarily strictly within!) the
 current frame.  Loop through the GC map iterator, getting the
 address of each object pointer, adding them to the root locations
 deque.<p>

 NOTE: Because of the callee save policy of the optimizing
 compiler, references associated with a given frame may be in
 callee stack frames (lower memory), <i>outside</i> the current
 frame.  So the iterator may return locations that are outside the
 frame being scanned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
</dl>
</li>
</ul>
<a name="processFrameForCode-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processFrameForCode</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.507">processFrameForCode</a>(int&nbsp;verbosity)</pre>
<div class="block">Identify all pointers into code pointers associated with a frame.
 There are two cases to be considered: a) the instruction pointer
 associated with each frame (stored in the thread's metadata for
 the top frame and as a return address for all subsequent frames),
 and b) local variables on the stack which happen to be pointers
 to code.<p>

 FIXME: SB: Why is it that JNI frames are skipped when considering
 top of stack frames, while boot image frames are skipped when
 considering other frames.  Shouldn't they both be considered in
 both cases?</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
</dl>
</li>
</ul>
<a name="pushFrameIP-org.vmmagic.unboxed.ObjectReference-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pushFrameIP</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.544">pushFrameIP</a>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;code,
                         int&nbsp;verbosity)</pre>
<div class="block">Push the instruction pointer associated with this frame onto the
 code locations deque.<p>

 A stack frame represents an execution context, and thus has an
 instruction pointer associated with it.  In the case of the top
 frame, the instruction pointer is captured by the IP register,
 which is preserved in the thread data structure at thread switch
 time.  In the case of all non-top frames, the next instruction
 pointer is stored as the return address for the <i>previous</i>
 frame.<p>

 The address of the code pointer is pushed onto the code locations
 deque along with the address of the code object into which it
 points (both are required since the former is an internal
 pointer).<p>

 The code pointers are updated later (after stack scanning) when
 the code locations deque is processed. The pointer from RVMMethod
 to the code object is not updated until after stack scanning, so
 the pointer to the (uncopied) code object is available throughout
 the stack scanning process, which enables interior pointer
 offsets to be correctly computed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>code</code> - start address of the machine code array associated
  with the method</dd>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
</dl>
</li>
</ul>
<a name="scanFrameForCode-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanFrameForCode</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.578">scanFrameForCode</a>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;code)</pre>
<div class="block">Scan this frame for internal code pointers.  The GC map iterator
 is used to identify any local variables (stored on the stack)
 which happen to be pointers into code.<p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>code</code> - The code object associated with this frame.</dd>
</dl>
</li>
</ul>
<a name="assertImmovableInCurrentCollection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertImmovableInCurrentCollection</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.603">assertImmovableInCurrentCollection</a>()</pre>
<div class="block">Assert that the stack is immovable.<p>

 Currently we do not allow stacks to be moved within the heap.  If
 a stack contains native stack frames, then it is impossible for
 us to safely move it.  Prior to the implementation of JNI, Jikes
 RVM did allow the GC system to move thread stacks, and called a
 special fixup routine, thread.fixupMovedStack to adjust all of
 the special interior pointers (SP, FP).  If we implement split C
 &amp; Java stacks then we could allow the Java stacks to be moved,
 but we can't move the native stack.</div>
</li>
</ul>
<a name="dumpTopFrameInfo-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpTopFrameInfo</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.628">dumpTopFrameInfo</a>(int&nbsp;verbosity)</pre>
<div class="block">Print out the basic information associated with the top frame on
 the stack.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
</dl>
</li>
</ul>
<a name="dumpRef-org.vmmagic.unboxed.Address-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpRef</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.644">dumpRef</a>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;refaddr,
                     int&nbsp;verbosity)</pre>
<div class="block">Print out information associated with a reference.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>refaddr</code> - The address of the reference in question.</dd>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
</dl>
</li>
</ul>
<a name="checkReference-org.vmmagic.unboxed.Address-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkReference</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.661">checkReference</a>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;refaddr,
                            int&nbsp;verbosity)</pre>
<div class="block">Check that a reference encountered during scanning is valid.  If
 the reference is invalid, dump stack and die.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>refaddr</code> - The address of the reference in question.</dd>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
</dl>
</li>
</ul>
<a name="checkReference-org.vmmagic.unboxed.Address-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkReference</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.698">checkReference</a>(<a href="../../../../org/vmmagic/unboxed/Address.html" title="class in org.vmmagic.unboxed">Address</a>&nbsp;refaddr)</pre>
<div class="block">Check that a reference encountered during scanning is valid.  If
 the reference is invalid, dump stack and die.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>refaddr</code> - The address of the reference in question.</dd>
</dl>
</li>
</ul>
<a name="printMethod-org.jikesrvm.classloader.RVMMethod-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printMethod</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.715">printMethod</a>(<a href="../../../../org/jikesrvm/classloader/RVMMethod.html" title="class in org.jikesrvm.classloader">RVMMethod</a>&nbsp;m)</pre>
<div class="block">Print out the name of a method</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>m</code> - The method to be printed</dd>
</dl>
</li>
</ul>
<a name="printMethodHeader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printMethodHeader</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.725">printMethodHeader</a>()</pre>
<div class="block">Print out the method header for the method associated with the
 current frame</div>
</li>
</ul>
<a name="dumpStackFrame-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dumpStackFrame</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ScanThread.html#line.759">dumpStackFrame</a>(int&nbsp;verbosity)</pre>
<div class="block">Dump the contents of a stack frame. Attempts to interpret each
 word as an object reference</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>verbosity</code> - The level of verbosity to be used when
 performing the scan.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ScanThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jikesrvm/mm/mmtk/ScanStatics.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/jikesrvm/mm/mmtk/Statistics.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jikesrvm/mm/mmtk/ScanThread.html" target="_top">Frames</a></li>
<li><a href="ScanThread.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
