<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>LoopVersioning (Jikes RVM API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LoopVersioning (Jikes RVM API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LoopVersioning.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoadElimination.UseRecordSet.html" title="class in org.jikesrvm.compilers.opt.ssa"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/jikesrvm/compilers/opt/ssa/PiNodes.html" title="class in org.jikesrvm.compilers.opt.ssa"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/jikesrvm/compilers/opt/ssa/LoopVersioning.html" target="_top">Frames</a></li>
<li><a href="LoopVersioning.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jikesrvm.compilers.opt.ssa</div>
<h2 title="Class LoopVersioning" class="title">Class LoopVersioning</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">org.jikesrvm.compilers.opt.driver.CompilerPhase</a></li>
<li>
<ul class="inheritance">
<li>org.jikesrvm.compilers.opt.ssa.LoopVersioning</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.246">LoopVersioning</a>
extends <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></pre>
<div class="block">This optimisation works from the outer most loop inward, optimising
 loops that conform to being regular <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow"><code>AnnotatedLSTNode</code></a>s. The optimisations performs the following
 operations:
 <ul>
 <li>
 1) Determine the bound and null checks to be eliminated. These are
 the ones that operate on the loop iterator. If no bound checks can
 be eliminated, stop optimising this loop.
 <li>
 2) Determine the registers defined in the loop.
 <li>
 3) Generate phi nodes that define the original register defined by
 the loop and use two newly created registers.
 <li>
 4) Create a version of the original loop that uses the first of the
 newly created registers instead of the original registers.
 <li>
 5) Create a second version, this time with the result of the
 eliminated checks set to true.
 <li>
 6) Work out what the maximum value for all the bounds checks are
 and create branches to optimal or suboptimal loops
 <li>
 7) Fix up the phi node predecessors
 <li>
 8) Remove the unoptimized loop if its redundant
 <li>
 9) Replace register definitions in the original loop with phi
 instructions
 <li>
 10) Compact node numbering so that CFG number of nodes reflects
 that some basic blocks may have been deleted
 </ul>
 <p>
 Example:
 <listing>
   for (int t1=0; t1 &lt; 100; t1++) {
      g1 = null_check   l0
      g2 = bounds_check l0, t1
      g3 = guard_combine g1,g2
      t2 = aload l0, t1, g3
      g4 = null_check   l1
      g5 = bounds_check l1, t1
      g6 = guard_combine g4,g5
           astore t2, l1, t1, g6
   }
 </listing>

 becomes:

 <listing>
   goto explicit_test_block
 successor_to_loops:
   g1 = phi g1_1, g1_2
   g2 = phi g2_1, g2_2
   g3 = phi g3_1, g3_2
   t2 = phi t2_1, t2_2
   g4 = phi g4_1, g4_2
   g5 = phi g5_1, g5_2
   g6 = phi g6_1, g6_2
   goto after_loop
 explicit_test_block:
   if l0 == null (unlikely) goto sub_optimal_loop
   if 100 >= l0.length (unlikely) goto sub_optimal_loop
   if l1 == null (unlikely) goto sub_optimal_loop
   if 100 >= l1.length (unlikely) goto sub_optimal_loop
   goto optimal_loop
 sub_optimal_loop:
   for (int t1_1=0; t1_1 &lt; 100; t1_1++) {
      g1_1 = null_check   l0
      g2_1 = bounds_check l0, t1_1
      g3_1 = guard_combine g1_1,g2_1
      t2_1 = aload l0, t1_1, g3_1
      g4_1 = null_check   l1
      g5_1 = bounds_check l1, t1_1
      g6_1 = guard_combine g4_1,g5_1
             astore t2_1, l1, t1_1, g6_1
   }
   goto successor_to_loops
 optimal_loop:
   for (int t1_2=0; t1_2 &lt; 100; t1_2++) {
      g1_2 = true_guard
      g2_2 = true_guard
      g3_2 = guard_combine g1_2,g2_2
      t2_2 = aload l0, t1_2, g3_2
      g4_2 = null_check   l1
      g5_2 = bounds_check l1, t1_2
      g6_2 = guard_combine g4_2,g5_2
             astore t2_2, l1, t1_2, g6_2
   }
   goto successor_to_loops
 after_loop:
 </listing>

 The optimisation works on the Heap SSA form. A more accurate
 example of the transformation would be:

 <listing>
   heap1 = ...; // previous heap state
   t1_1 = 0;
   if t1_1 &ge; 100 goto label2
   label1:
      t1_2 = phi t1_1, t1_3
      heap2 = phi heap1, heap3
      g1 = null_check   l0
      g2 = bounds_check l0, t1_2
      g3 = guard_combine g1,g2
      t2 = aload l0, t1_2, g3
      g4 = null_check   l1
      g5 = bounds_check l1, t1_2
      g6 = guard_combine g4,g5
      heap3 = astore t2, l1, t1_2, g6
      t1_3 = t1_2 + 1
      if t1_3 &lt; 100 label1 *   label2:
 </listing>

 becomes:

 <listing>
   heap1 = ...; // previous heap state
   t1_1 = 0;
   if t1_1 &ge; 100 goto label2
   goto explicit_test_block
 successor_to_loops:
   t1_2 = phi t1_2_1, t1_2_2
   heap2 = phi heap2_1, heap2_2
   g1 = phi g1_1, g1_2
   g2 = phi g2_1, g2_2
   g3 = phi g3_1, g3_2
   t2 = phi t2_1, t2_2
   g4 = phi g4_1, g4_2
   g5 = phi g5_1, g5_2
   g6 = phi g6_1, g6_2
   heap3 = phi heap3_1, heap3_2
   t1_3 = phi t1_3_1, t1_3_2
   goto after_loop
 explicit_test_block:
   g1_2 = if l0 == null (unlikely) goto sub_optimal_loop
   g2_2 = if 100 >= l0.length (unlikely) goto sub_optimal_loop
   g4_2 = if l1 == null (unlikely) goto sub_optimal_loop
   g5_2 = if 100 >= l1.length (unlikely) goto sub_optimal_loop
   goto optimal_loop
 sub_optimal_loop:
   label1_1:
      t1_2_1 = phi t1_1, t1_3_1
      heap2_1 = phi heap1, heap3_1
      g1_1 = null_check   l0
      g2_1 = bounds_check l0, t1_2_1
      g3_1 = guard_combine g1_1,g2_1
      t2_1 = aload l0, t1_2_1, g3_1
      g4_1 = null_check   l1
      g5_1 = bounds_check l1, t1_2_1
      g6_1 = guard_combine g4_1,g5_1
      heap3_1 = astore t2_1, l1, t1_2_1, g6_1
      t1_3_1 = t1_2_1 + 1
      if t1_3_1 &lt; 100 label1_1
   goto successor_to_loops
 optimal_loop:
   label1_2:
      t1_2_2 = phi t1_1, t1_3_2
      heap2_2 = phi heap1, heap3_2
      g3_2 = guard_combine g1_2,g2_2
      t2_2 = aload l0, t1_2_2, g3_2
      g6_2 = guard_combine g4_2,g5_2
      heap3_2 = astore t2_2, l1, t1_2_2, g6_2
      t1_3_2 = t1_2_2 + 1
      if t1_3_2 &lt; 100 label1_2
   goto successor_to_loops
 after_loop:
 label2:
 </listing></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/Constructor.html?is-external=true" title="class or interface in java.lang.reflect">Constructor</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#constructor">constructor</a></strong></code>
<div class="block">Constructor for this compiler phase</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#DEBUG">DEBUG</a></strong></code>
<div class="block">Flag to optionally print verbose debugging messages</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/ssa/SSAOptions.html" title="class in org.jikesrvm.compilers.opt.ssa">SSAOptions</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#desiredSSAOptions">desiredSSAOptions</a></strong></code>
<div class="block">SSA options</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#domPhase">domPhase</a></strong></code>
<div class="block">Compiler phases called from this one</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#enterSSA">enterSSA</a></strong></code>
<div class="block">Compiler phases called from this one</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#inSSAphase">inSSAphase</a></strong></code>
<div class="block">Run inside SSA sub-phase</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#ir">ir</a></strong></code>
<div class="block">IR for optimisation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#leaveSSA">leaveSSA</a></strong></code>
<div class="block">Compiler phases called from this one</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashSet.html?is-external=true" title="class or interface in java.util">HashSet</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#loopRegisterSet">loopRegisterSet</a></strong></code>
<div class="block">Set used to store the loop related register</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#OPTIMIZED_LOOP_OPERAND">OPTIMIZED_LOOP_OPERAND</a></strong></code>
<div class="block">The phi instruction operand holding the optimized loop variable</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#UNOPTIMIZED_LOOP_OPERAND">UNOPTIMIZED_LOOP_OPERAND</a></strong></code>
<div class="block">The phi instruction operand holding the unoptimized loop variable</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#VERIFY">VERIFY</a></strong></code>
<div class="block">Flag to verify computed IR</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.jikesrvm.compilers.opt.driver.CompilerPhase">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.jikesrvm.compilers.opt.driver.<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></h3>
<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#container">container</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#LoopVersioning()">LoopVersioning</a></strong>()</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#createBranchBlocks(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20java.util.ArrayList,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20java.util.HashMap)">createBranchBlocks</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;block,
                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;checksToEliminate,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopEntry,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;optimizedLoopEntry,
                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</code>
<div class="block">Create the block containing explict branches to either the
 optimized or unoptimized loops</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#createCloneLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.HashMap,%20java.util.HashMap)">createCloneLoop</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                              <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;regMap,
                              <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;regToBlockMap)</code>
<div class="block">Create a clone of the loop replacing definitions in the cloned
 loop with those found in the register map</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#createOptimizedLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.HashMap,%20java.util.ArrayList,%20java.util.HashMap)">createOptimizedLoop</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;regMap,
                                      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;instrToEliminate,
                                      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;regToBlockMap)</code>
<div class="block">Create a clone of the loop replacing definitions in the cloned
 loop with those found in the register map and eliminate
 unnecessary bound checks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#findLoopToOptimise(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode)">findLoopToOptimise</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop)</code>
<div class="block">Find an outermost loop to optimise and optimise it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#fixUpPhiPredecessors(java.util.ArrayList,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">fixUpPhiPredecessors</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;phiInstructions,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopExit,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;optimizedLoopExit)</code>
<div class="block">When phi nodes were generated the basic blocks weren't known for
 the predecessors, fix this up now.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#generateExplicitBoundCheck(org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.operand.Operand,%20org.jikesrvm.compilers.opt.ir.operand.Operand,%20java.util.HashMap,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">generateExplicitBoundCheck</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;boundCheckInstr,
                                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;minIndexValue,
                                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;maxIndexValue,
                                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap,
                                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;block,
                                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopEntry)</code>
<div class="block">Generate bound check branch blocks</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#generateNullCheckBranchBlocks(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.ArrayList,%20java.util.HashMap,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">generateNullCheckBranchBlocks</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                                          <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;checksToEliminate,
                                                          <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap,
                                                          <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;block,
                                                          <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopEntry)</code>
<div class="block">Generate null check branch blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#generatePhiNodes(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.ArrayList,%20java.util.ArrayList,%20java.util.ArrayList,%20java.util.HashMap,%20java.util.HashMap)">generatePhiNodes</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;registers,
                                <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/classloader/TypeReference.html" title="class in org.jikesrvm.classloader">TypeReference</a>&gt;&nbsp;types,
                                <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;phiInstructions,
                                <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;subOptimalRegMap,
                                <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</code>
<div class="block">Generate into a new block phi nodes that define the original
 register defined by the loop and use two newly created
 registers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/Constructor.html?is-external=true" title="class or interface in java.lang.reflect">Constructor</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#getClassConstructor()">getClassConstructor</a></strong>()</code>
<div class="block">Get a constructor object for this compiler phase</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#getConstantAdjustedArrayLengthDistance(org.jikesrvm.compilers.opt.ir.operand.Operand)">getConstantAdjustedArrayLengthDistance</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;op)</code>
<div class="block">Get the distance from an array length by addding up instructions
 that adjust the array length result by a constant amount</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#getConstantAdjustedArrayLengthRef(org.jikesrvm.compilers.opt.ir.operand.Operand)">getConstantAdjustedArrayLengthRef</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;op)</code>
<div class="block">Get the array length reference ignoring instructions that adjust
 its result by a fixed amount</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#getListOfChecksToEliminate(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.ArrayList)">getListOfChecksToEliminate</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;instrToEliminate)</code>
<div class="block">Create a list of instructions to be eliminated</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#getName()">getName</a></strong>()</code>
<div class="block">Return a string name for this phase.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#getRegistersDefinedInLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.ArrayList,%20java.util.ArrayList,%20java.util.ArrayList)">getRegistersDefinedInLoop</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                                  <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;registers,
                                                  <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/classloader/TypeReference.html" title="class in org.jikesrvm.classloader">TypeReference</a>&gt;&nbsp;types,
                                                  <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;definingInstructions)</code>
<div class="block">Get registers defined in the given loop.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#isOptimizedLoop(org.jikesrvm.compilers.opt.ir.Register)">isOptimizedLoop</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&nbsp;reg)</code>
<div class="block">Check whether the loop that contain such iterator register had
 been optimized</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#modifyOriginalLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.ArrayList,%20java.util.ArrayList,%20java.util.HashMap,%20java.util.HashMap)">modifyOriginalLoop</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;phiInstructions,
                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;definingInstrInOriginalLoop,
                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;subOptimalRegMap,
                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</code>
<div class="block">Remove loop and replace register definitions in the original loop
 with phi instructions</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/RegisterOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">RegisterOperand</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#nullCheckPerformedInLoopPredecessors(org.jikesrvm.compilers.opt.ir.BasicBlock,%20org.jikesrvm.compilers.opt.ir.Instruction)">nullCheckPerformedInLoopPredecessors</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;header,
                                                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;instr)</code>
<div class="block">Can we eliminate a null check as it has lready been performed?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#perform(org.jikesrvm.compilers.opt.ir.IR)">perform</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;_ir)</code>
<div class="block">This is the method that actually does the work of the phase.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#removeUnoptimizedLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode,%20java.util.HashMap)">removeUnoptimizedLoop</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                          <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;unoptimizedLoopMap)</code>
<div class="block">Remove unreachable unoptimized loop</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#renameOptimizedLoops(java.util.HashMap,%20java.util.HashMap)">renameOptimizedLoops</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;subOptimalRegMap,
                                        <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</code>
<div class="block">Rename the iterators for optimized loops so we can tell they are still optimized</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#report(java.lang.String)">report</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;s)</code>
<div class="block">Human readable report of what goes on</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#setOptimizedLoop(org.jikesrvm.compilers.opt.ir.Register)">setOptimizedLoop</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&nbsp;reg)</code>
<div class="block">Put the optimized loop's iterator register into the hash set</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#shouldPerform(org.jikesrvm.compilers.opt.OptOptions)">shouldPerform</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/OptOptions.html" title="class in org.jikesrvm.compilers.opt">OptOptions</a>&nbsp;options)</code>
<div class="block">Should loop versioning be performed?</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.jikesrvm.compilers.opt.driver.CompilerPhase">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.jikesrvm.compilers.opt.driver.<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></h3>
<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#dumpIR(org.jikesrvm.compilers.opt.ir.IR,%20java.lang.String)">dumpIR</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#dumpIR(org.jikesrvm.compilers.opt.ir.IR,%20java.lang.String,%20boolean)">dumpIR</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#getCompilerPhaseConstructor(java.lang.Class)">getCompilerPhaseConstructor</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#getCompilerPhaseConstructor(java.lang.Class,%20java.lang.Class[])">getCompilerPhaseConstructor</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#newExecution(org.jikesrvm.compilers.opt.ir.IR)">newExecution</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#performPhase(org.jikesrvm.compilers.opt.ir.IR)">performPhase</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#printingEnabled(org.jikesrvm.compilers.opt.OptOptions,%20boolean)">printingEnabled</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#reportAdditionalStats()">reportAdditionalStats</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#setContainer(org.jikesrvm.compilers.opt.driver.OptimizationPlanAtomicElement)">setContainer</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#verify(org.jikesrvm.compilers.opt.ir.IR)">verify</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEBUG</h4>
<pre>private static final&nbsp;boolean <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.251">DEBUG</a></pre>
<div class="block">Flag to optionally print verbose debugging messages</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.jikesrvm.compilers.opt.ssa.LoopVersioning.DEBUG">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="VERIFY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>VERIFY</h4>
<pre>private static final&nbsp;boolean <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.255">VERIFY</a></pre>
<div class="block">Flag to verify computed IR</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.jikesrvm.compilers.opt.ssa.LoopVersioning.VERIFY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="OPTIMIZED_LOOP_OPERAND">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OPTIMIZED_LOOP_OPERAND</h4>
<pre>private static final&nbsp;int <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.282">OPTIMIZED_LOOP_OPERAND</a></pre>
<div class="block">The phi instruction operand holding the optimized loop variable</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.jikesrvm.compilers.opt.ssa.LoopVersioning.OPTIMIZED_LOOP_OPERAND">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="UNOPTIMIZED_LOOP_OPERAND">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>UNOPTIMIZED_LOOP_OPERAND</h4>
<pre>private static final&nbsp;int <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.286">UNOPTIMIZED_LOOP_OPERAND</a></pre>
<div class="block">The phi instruction operand holding the unoptimized loop variable</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.jikesrvm.compilers.opt.ssa.LoopVersioning.UNOPTIMIZED_LOOP_OPERAND">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ir">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ir</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a> <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.291">ir</a></pre>
<div class="block">IR for optimisation</div>
</li>
</ul>
<a name="loopRegisterSet">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loopRegisterSet</h4>
<pre>private&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashSet.html?is-external=true" title="class or interface in java.util">HashSet</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt; <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.296">loopRegisterSet</a></pre>
<div class="block">Set used to store the loop related register</div>
</li>
</ul>
<a name="desiredSSAOptions">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>desiredSSAOptions</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/ssa/SSAOptions.html" title="class in org.jikesrvm.compilers.opt.ssa">SSAOptions</a> <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.301">desiredSSAOptions</a></pre>
<div class="block">SSA options</div>
</li>
</ul>
<a name="enterSSA">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enterSSA</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a> <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.305">enterSSA</a></pre>
<div class="block">Compiler phases called from this one</div>
</li>
</ul>
<a name="leaveSSA">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leaveSSA</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a> <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.305">leaveSSA</a></pre>
<div class="block">Compiler phases called from this one</div>
</li>
</ul>
<a name="domPhase">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>domPhase</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a> <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.305">domPhase</a></pre>
<div class="block">Compiler phases called from this one</div>
</li>
</ul>
<a name="inSSAphase">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inSSAphase</h4>
<pre>private static final&nbsp;boolean <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.309">inSSAphase</a></pre>
<div class="block">Run inside SSA sub-phase</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.jikesrvm.compilers.opt.ssa.LoopVersioning.inSSAphase">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="constructor">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>constructor</h4>
<pre>private static final&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/Constructor.html?is-external=true" title="class or interface in java.lang.reflect">Constructor</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a>&gt; <a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.316">constructor</a></pre>
<div class="block">Constructor for this compiler phase</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LoopVersioning()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LoopVersioning</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.331">LoopVersioning</a>()</pre>
<div class="block">Constructor</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="report(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>report</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.263">report</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;s)</pre>
<div class="block">Human readable report of what goes on</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>s</code> - String to print</dd></dl>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.274">getName</a>()</pre>
<div class="block">Return a string name for this phase.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#getName()">getName</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>"Loop Versioning"</dd></dl>
</li>
</ul>
<a name="getClassConstructor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClassConstructor</h4>
<pre>public&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/Constructor.html?is-external=true" title="class or interface in java.lang.reflect">Constructor</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a>&gt;&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.324">getClassConstructor</a>()</pre>
<div class="block">Get a constructor object for this compiler phase</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#getClassConstructor()">getClassConstructor</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>compiler phase constructor</dd></dl>
</li>
</ul>
<a name="shouldPerform(org.jikesrvm.compilers.opt.OptOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldPerform</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.345">shouldPerform</a>(<a href="../../../../../org/jikesrvm/compilers/opt/OptOptions.html" title="class in org.jikesrvm.compilers.opt">OptOptions</a>&nbsp;options)</pre>
<div class="block">Should loop versioning be performed?</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#shouldPerform(org.jikesrvm.compilers.opt.OptOptions)">shouldPerform</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>options</code> - the compiler options for the compilation</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the phase should be performed</dd></dl>
</li>
</ul>
<a name="perform(org.jikesrvm.compilers.opt.ir.IR)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>perform</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.353">perform</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;_ir)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#perform(org.jikesrvm.compilers.opt.ir.IR)">CompilerPhase</a></code></strong></div>
<div class="block">This is the method that actually does the work of the phase.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#perform(org.jikesrvm.compilers.opt.ir.IR)">perform</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>_ir</code> - the IR to process</dd></dl>
</li>
</ul>
<a name="findLoopToOptimise(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findLoopToOptimise</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.438">findLoopToOptimise</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop)</pre>
<div class="block">Find an outermost loop to optimise and optimise it. Focus on
 annotated regular loops, LICM should handle possible
 optimisation for the non-regular loops</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>loop</code> - Loop to search</dd>
<dt><span class="strong">Returns:</span></dt><dd>was optimisation performed</dd></dl>
</li>
</ul>
<a name="getListOfChecksToEliminate(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.ArrayList)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getListOfChecksToEliminate</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.581">getListOfChecksToEliminate</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                              <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;instrToEliminate)</pre>
<div class="block">Create a list of instructions to be eliminated</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>loop</code> - the loop to examine</dd><dd><code>instrToEliminate</code> - the instructions to remove</dd></dl>
</li>
</ul>
<a name="getRegistersDefinedInLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.ArrayList, java.util.ArrayList, java.util.ArrayList)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRegistersDefinedInLoop</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.629">getRegistersDefinedInLoop</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                             <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;registers,
                             <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/classloader/TypeReference.html" title="class in org.jikesrvm.classloader">TypeReference</a>&gt;&nbsp;types,
                             <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;definingInstructions)</pre>
<div class="block">Get registers defined in the given loop. As we're in SSA form
 all register definitions must be unique.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>loop</code> - - the loop to examine</dd><dd><code>registers</code> - - vector to which defined registers are added</dd></dl>
</li>
</ul>
<a name="generatePhiNodes(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.ArrayList, java.util.ArrayList, java.util.ArrayList, java.util.HashMap, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generatePhiNodes</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.670">generatePhiNodes</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;registers,
                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/classloader/TypeReference.html" title="class in org.jikesrvm.classloader">TypeReference</a>&gt;&nbsp;types,
                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;phiInstructions,
                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;subOptimalRegMap,
                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</pre>
<div class="block">Generate into a new block phi nodes that define the original
 register defined by the loop and use two newly created
 registers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>registers</code> - - vector to which defined registers need to be
 created registers.x used in creating phi nodes</dd><dd><code>types</code> - - vector of corresponding types of registers.</dd><dd><code>phiInstructions</code> - - created phi instructions</dd><dd><code>subOptimalRegMap</code> - - mapping of orignal destination to the
 newly created destination for the unoptimized loop</dd><dd><code>optimalRegMap</code> - - mapping of orignal destination to the
 newly created destination for the optimized loop</dd></dl>
</li>
</ul>
<a name="createCloneLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.HashMap, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createCloneLoop</h4>
<pre>private&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.713">createCloneLoop</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                             <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;regMap,
                                             <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;regToBlockMap)</pre>
<div class="block">Create a clone of the loop replacing definitions in the cloned
 loop with those found in the register map</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>loop</code> - - loop to clone</dd><dd><code>regMap</code> - - mapping of original definition to new
 definition</dd>
<dt><span class="strong">Returns:</span></dt><dd>a mapping from original BBs to created BBs</dd></dl>
</li>
</ul>
<a name="createOptimizedLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.HashMap, java.util.ArrayList, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createOptimizedLoop</h4>
<pre>private&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.814">createOptimizedLoop</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                                 <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;regMap,
                                                 <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;instrToEliminate,
                                                 <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;regToBlockMap)</pre>
<div class="block">Create a clone of the loop replacing definitions in the cloned
 loop with those found in the register map and eliminate
 unnecessary bound checks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>loop</code> - - loop to clone</dd><dd><code>regMap</code> - - mapping of original definition to new
 definition</dd><dd><code>instrToEliminate</code> - - instructions to eliminate</dd><dd><code>regToBlockMap</code> - - mapping of a register to its defining BB</dd>
<dt><span class="strong">Returns:</span></dt><dd>a mapping from original BBs to created BBs</dd></dl>
</li>
</ul>
<a name="fixUpPhiPredecessors(java.util.ArrayList, org.jikesrvm.compilers.opt.ir.BasicBlock, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fixUpPhiPredecessors</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.923">fixUpPhiPredecessors</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;phiInstructions,
                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopExit,
                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;optimizedLoopExit)</pre>
<div class="block">When phi nodes were generated the basic blocks weren't known for
 the predecessors, fix this up now. (It may also not be possible
 to reach the unoptimized loop any more)</div>
</li>
</ul>
<a name="createBranchBlocks(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, org.jikesrvm.compilers.opt.ir.BasicBlock, java.util.ArrayList, org.jikesrvm.compilers.opt.ir.BasicBlock, org.jikesrvm.compilers.opt.ir.BasicBlock, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBranchBlocks</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.947">createBranchBlocks</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                         <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;block,
                         <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;checksToEliminate,
                         <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopEntry,
                         <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;optimizedLoopEntry,
                         <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</pre>
<div class="block">Create the block containing explict branches to either the
 optimized or unoptimized loops</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>optimalRegMap</code> - - mapping used to map eliminated bound and
 null check guards to</dd></dl>
</li>
</ul>
<a name="generateNullCheckBranchBlocks(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.ArrayList, java.util.HashMap, org.jikesrvm.compilers.opt.ir.BasicBlock, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateNullCheckBranchBlocks</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1104">generateNullCheckBranchBlocks</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                                       <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;checksToEliminate,
                                       <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap,
                                       <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;block,
                                       <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopEntry)</pre>
<div class="block">Generate null check branch blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>loop</code> - the current loop where checks are being eliminated</dd><dd><code>checksToEliminate</code> - all of the checks that are being eliminated in the pass</dd><dd><code>optimalRegMap</code> - a map from original register to the register used in the optimal loop</dd><dd><code>block</code> - the block to generate code into</dd><dd><code>unoptimizedLoopEntry</code> - entry to the unoptimized loop for if the check fails</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new block to generate code into</dd></dl>
</li>
</ul>
<a name="generateExplicitBoundCheck(org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.operand.Operand, org.jikesrvm.compilers.opt.ir.operand.Operand, java.util.HashMap, org.jikesrvm.compilers.opt.ir.BasicBlock, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateExplicitBoundCheck</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1178">generateExplicitBoundCheck</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;boundCheckInstr,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;minIndexValue,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;maxIndexValue,
                                    <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;block,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;unoptimizedLoopEntry)</pre>
<div class="block">Generate bound check branch blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>boundCheckInstr</code> - the bound check instruction in question</dd><dd><code>minIndexValue</code> - the min value for an iterator a loop will generate</dd><dd><code>maxIndexValue</code> - the max value for an iterator a loop will generate</dd><dd><code>optimalRegMap</code> - a map from original register to the register used in the optimal loop</dd><dd><code>block</code> - the block to generate code into</dd><dd><code>unoptimizedLoopEntry</code> - entry to the unoptimized loop for if the check fails</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new block to generate code into</dd></dl>
</li>
</ul>
<a name="nullCheckPerformedInLoopPredecessors(org.jikesrvm.compilers.opt.ir.BasicBlock, org.jikesrvm.compilers.opt.ir.Instruction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nullCheckPerformedInLoopPredecessors</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/RegisterOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">RegisterOperand</a>&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1292">nullCheckPerformedInLoopPredecessors</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;header,
                                                   <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;instr)</pre>
<div class="block">Can we eliminate a null check as it has lready been performed?
 NB SSA guarantees that if a value is null it must always be null</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>instr</code> - null check instruction</dd></dl>
</li>
</ul>
<a name="getConstantAdjustedArrayLengthRef(org.jikesrvm.compilers.opt.ir.operand.Operand)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConstantAdjustedArrayLengthRef</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1315">getConstantAdjustedArrayLengthRef</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;op)</pre>
<div class="block">Get the array length reference ignoring instructions that adjust
 its result by a fixed amount</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>op</code> - operand to chase arraylength opcode to
 constant value from an array length</dd></dl>
</li>
</ul>
<a name="getConstantAdjustedArrayLengthDistance(org.jikesrvm.compilers.opt.ir.operand.Operand)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConstantAdjustedArrayLengthDistance</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1340">getConstantAdjustedArrayLengthDistance</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;op)</pre>
<div class="block">Get the distance from an array length by addding up instructions
 that adjust the array length result by a constant amount</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>op</code> - operand to chase arraylength opcode to</dd></dl>
</li>
</ul>
<a name="modifyOriginalLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.ArrayList, java.util.ArrayList, java.util.HashMap, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>modifyOriginalLoop</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1371">modifyOriginalLoop</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;phiInstructions,
                      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;definingInstrInOriginalLoop,
                      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;subOptimalRegMap,
                      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</pre>
<div class="block">Remove loop and replace register definitions in the original loop
 with phi instructions</div>
</li>
</ul>
<a name="removeUnoptimizedLoop(org.jikesrvm.compilers.opt.controlflow.AnnotatedLSTNode, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeUnoptimizedLoop</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1491">removeUnoptimizedLoop</a>(<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/AnnotatedLSTNode.html" title="class in org.jikesrvm.compilers.opt.controlflow">AnnotatedLSTNode</a>&nbsp;loop,
                         <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&gt;&nbsp;unoptimizedLoopMap)</pre>
<div class="block">Remove unreachable unoptimized loop</div>
</li>
</ul>
<a name="setOptimizedLoop(org.jikesrvm.compilers.opt.ir.Register)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setOptimizedLoop</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1514">setOptimizedLoop</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&nbsp;reg)</pre>
<div class="block">Put the optimized loop's iterator register into the hash set</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reg</code> - register</dd></dl>
</li>
</ul>
<a name="isOptimizedLoop(org.jikesrvm.compilers.opt.ir.Register)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOptimizedLoop</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1525">isOptimizedLoop</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&nbsp;reg)</pre>
<div class="block">Check whether the loop that contain such iterator register had
 been optimized</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reg</code> - register</dd>
<dt><span class="strong">Returns:</span></dt><dd>the test result</dd></dl>
</li>
</ul>
<a name="renameOptimizedLoops(java.util.HashMap, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>renameOptimizedLoops</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/ssa/LoopVersioning.html#line.1532">renameOptimizedLoops</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;subOptimalRegMap,
                        <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Register.html" title="class in org.jikesrvm.compilers.opt.ir">Register</a>&gt;&nbsp;optimalRegMap)</pre>
<div class="block">Rename the iterators for optimized loops so we can tell they are still optimized</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LoopVersioning.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/jikesrvm/compilers/opt/ssa/LoadElimination.UseRecordSet.html" title="class in org.jikesrvm.compilers.opt.ssa"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/jikesrvm/compilers/opt/ssa/PiNodes.html" title="class in org.jikesrvm.compilers.opt.ssa"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/jikesrvm/compilers/opt/ssa/LoopVersioning.html" target="_top">Frames</a></li>
<li><a href="LoopVersioning.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
