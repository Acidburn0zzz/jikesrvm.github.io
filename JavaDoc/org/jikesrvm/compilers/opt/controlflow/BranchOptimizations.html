<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>BranchOptimizations (Jikes RVM API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BranchOptimizations (Jikes RVM API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BranchOptimizations.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html" title="class in org.jikesrvm.compilers.opt.controlflow"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchSimplifier.html" title="class in org.jikesrvm.compilers.opt.controlflow"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html" target="_top">Frames</a></li>
<li><a href="BranchOptimizations.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jikesrvm.compilers.opt.controlflow</div>
<h2 title="Class BranchOptimizations" class="title">Class BranchOptimizations</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">org.jikesrvm.compilers.opt.driver.CompilerPhase</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html" title="class in org.jikesrvm.compilers.opt.controlflow">org.jikesrvm.compilers.opt.controlflow.BranchOptimizationDriver</a></li>
<li>
<ul class="inheritance">
<li>org.jikesrvm.compilers.opt.controlflow.BranchOptimizations</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.97">BranchOptimizations</a>
extends <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html" title="class in org.jikesrvm.compilers.opt.controlflow">BranchOptimizationDriver</a></pre>
<div class="block">Perform simple peephole optimizations for branches.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../../../org/jikesrvm/classloader/Atom.html" title="class in org.jikesrvm.classloader">Atom</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#ABS">ABS</a></strong></code>
<div class="block">Name of abs method used as a special case in conditional moves</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#mayDuplicateCondBranches">mayDuplicateCondBranches</a></strong></code>
<div class="block">Are we allowed to duplication conditional branches?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#mayReorderCode">mayReorderCode</a></strong></code>
<div class="block">Is branch optimizations allowed to change the code order to
 create fallthrough edges (and thus merge basic blocks)?</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.jikesrvm.compilers.opt.driver.CompilerPhase">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.jikesrvm.compilers.opt.driver.<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></h3>
<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#container">container</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#BranchOptimizations(int,%20boolean,%20boolean)">BranchOptimizations</a></strong>(int&nbsp;level,
                                      boolean&nbsp;mayReorderCode,
                                      boolean&nbsp;mayDuplicateCondBranches)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#BranchOptimizations(int,%20boolean,%20boolean,%20boolean)">BranchOptimizations</a></strong>(int&nbsp;level,
                                      boolean&nbsp;mayReorderCode,
                                      boolean&nbsp;mayDuplicateCondBranches,
                                      boolean&nbsp;simplify)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#booleanCompareHelper(org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.operand.RegisterOperand,%20org.jikesrvm.compilers.opt.ir.operand.Operand,%20org.jikesrvm.compilers.opt.ir.operand.Operand,%20org.jikesrvm.compilers.opt.ir.operand.ConditionOperand)">booleanCompareHelper</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/RegisterOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">RegisterOperand</a>&nbsp;res,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;val1,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;val2,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/ConditionOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">ConditionOperand</a>&nbsp;cond)</code>
<div class="block">Generate a boolean operation opcode

 
 1) IF br !</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#copyAndMapInstructions(org.jikesrvm.compilers.opt.ir.BasicBlock,%20java.util.HashMap)">copyAndMapInstructions</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                                            <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;map)</code>
<div class="block">For each real non-branch instruction s in bb,
 
  Copy s to s', and store s' in the returned array
  Insert the function s->s' in the map
 </div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#doCondMove(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.controlflow.Diamond,%20org.jikesrvm.compilers.opt.ir.Instruction)">doCondMove</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                    <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/Diamond.html" title="class in org.jikesrvm.compilers.opt.controlflow">Diamond</a>&nbsp;diamond,
                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb)</code>
<div class="block">Perform the transformation to replace conditional branch with a
 sequence using conditional moves.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#evaluateCost(org.jikesrvm.compilers.opt.ir.BasicBlock)">evaluateCost</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">Evaluate the cost of a basic block, in number of real instructions.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#flipConditionalBranch(org.jikesrvm.compilers.opt.ir.Instruction)">flipConditionalBranch</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb)</code>
<div class="block">Flip a conditional branch and remove the trailing goto.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#fpConditionOK(org.jikesrvm.compilers.opt.ir.operand.ConditionOperand)">fpConditionOK</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/ConditionOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">ConditionOperand</a>&nbsp;c)</code>
<div class="block">Is a specified condition operand 'safe' to transfer into an FCMP
 instruction?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#generateBooleanCompare(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">generateBooleanCompare</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                            <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                                            <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                                            <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;tb)</code>
<div class="block">Attempt to generate a boolean compare opcode from a conditional branch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#generateCondMove(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.BasicBlock,%20org.jikesrvm.compilers.opt.ir.Instruction)">generateCondMove</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                                <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb)</code>
<div class="block">Attempt to generate a straight-line sequence using conditional move
 instructions, to replace a diamond control flow structure.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#hasCMTaboo(org.jikesrvm.compilers.opt.ir.BasicBlock)">hasCMTaboo</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">Do any of the instructions in a basic block preclude eliminating the
 basic block with conditional moves?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#hasFloatingPointDef(org.jikesrvm.compilers.opt.ir.BasicBlock,%20boolean)">hasFloatingPointDef</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                                      boolean&nbsp;invert)</code>
<div class="block">Do any of the instructions in a basic block define a floating-point
 register?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#hasLongDef(org.jikesrvm.compilers.opt.ir.BasicBlock)">hasLongDef</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">Do any of the instructions in a basic block define a long
 register?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#insertBefore(org.jikesrvm.compilers.opt.ir.Instruction[],%20org.jikesrvm.compilers.opt.ir.Instruction)">insertBefore</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>[]&nbsp;list,
                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;s)</code>
<div class="block">Insert each instruction in a list before instruction s</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#isFlipCandidate(org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.Instruction)">isFlipCandidate</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                              <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;target)</code>
<div class="block">Is a conditional branch a candidate to be flipped?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#optimizeBranchInstruction(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">optimizeBranchInstruction</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                                  <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;s,
                                                  <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">This method actually does the work of attempting to
 peephole optimize a branch instruction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#processConditionalBranch(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">processConditionalBranch</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                                <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                                                <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">Perform optimizations for a conditional branch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#processGoto(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">processGoto</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                      <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;g,
                      <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">Perform optimizations for a Goto.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#processInlineGuard(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">processInlineGuard</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                                    <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">Perform optimizations for an inline guard.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#processTwoTargetConditionalBranch(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">processTwoTargetConditionalBranch</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                                                  <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                                                                  <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</code>
<div class="block">Perform optimizations for a two way conditional branch.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#rewriteWithTemporaries(org.jikesrvm.compilers.opt.ir.Instruction[],%20org.jikesrvm.compilers.opt.ir.IR)">rewriteWithTemporaries</a></strong>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>[]&nbsp;set,
                                            <a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir)</code>
<div class="block">For each in a set of instructions, rewrite every def to use a new
 temporary register.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.jikesrvm.compilers.opt.controlflow.BranchOptimizationDriver">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.jikesrvm.compilers.opt.controlflow.<a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html" title="class in org.jikesrvm.compilers.opt.controlflow">BranchOptimizationDriver</a></h3>
<code><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#applyPeepholeBranchOpts(org.jikesrvm.compilers.opt.ir.IR)">applyPeepholeBranchOpts</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#firstLabelFollowing(org.jikesrvm.compilers.opt.ir.Instruction)">firstLabelFollowing</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#firstRealInstructionFollowing(org.jikesrvm.compilers.opt.ir.Instruction)">firstRealInstructionFollowing</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#getName()">getName</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#maximizeBasicBlocks(org.jikesrvm.compilers.opt.ir.IR)">maximizeBasicBlocks</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#newExecution(org.jikesrvm.compilers.opt.ir.IR)">newExecution</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#perform(org.jikesrvm.compilers.opt.ir.IR)">perform</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#perform(org.jikesrvm.compilers.opt.ir.IR,%20boolean)">perform</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#printingEnabled(org.jikesrvm.compilers.opt.OptOptions,%20boolean)">printingEnabled</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#removeUnreachableCode(org.jikesrvm.compilers.opt.ir.IR)">removeUnreachableCode</a>, <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#shouldPerform(org.jikesrvm.compilers.opt.OptOptions)">shouldPerform</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.jikesrvm.compilers.opt.driver.CompilerPhase">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.jikesrvm.compilers.opt.driver.<a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html" title="class in org.jikesrvm.compilers.opt.driver">CompilerPhase</a></h3>
<code><a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#dumpIR(org.jikesrvm.compilers.opt.ir.IR,%20java.lang.String)">dumpIR</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#dumpIR(org.jikesrvm.compilers.opt.ir.IR,%20java.lang.String,%20boolean)">dumpIR</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#getClassConstructor()">getClassConstructor</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#getCompilerPhaseConstructor(java.lang.Class)">getCompilerPhaseConstructor</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#getCompilerPhaseConstructor(java.lang.Class,%20java.lang.Class[])">getCompilerPhaseConstructor</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#performPhase(org.jikesrvm.compilers.opt.ir.IR)">performPhase</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#reportAdditionalStats()">reportAdditionalStats</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#setContainer(org.jikesrvm.compilers.opt.driver.OptimizationPlanAtomicElement)">setContainer</a>, <a href="../../../../../org/jikesrvm/compilers/opt/driver/CompilerPhase.html#verify(org.jikesrvm.compilers.opt.ir.IR)">verify</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ABS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ABS</h4>
<pre>private static final&nbsp;<a href="../../../../../org/jikesrvm/classloader/Atom.html" title="class in org.jikesrvm.classloader">Atom</a> <a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.102">ABS</a></pre>
<div class="block">Name of abs method used as a special case in conditional moves</div>
</li>
</ul>
<a name="mayReorderCode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mayReorderCode</h4>
<pre>private final&nbsp;boolean <a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.110">mayReorderCode</a></pre>
<div class="block">Is branch optimizations allowed to change the code order to
 create fallthrough edges (and thus merge basic blocks)?
 After we run code reordering, we disallow this transformation to avoid
 destroying the desired code order.</div>
</li>
</ul>
<a name="mayDuplicateCondBranches">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>mayDuplicateCondBranches</h4>
<pre>private final&nbsp;boolean <a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.119">mayDuplicateCondBranches</a></pre>
<div class="block">Are we allowed to duplication conditional branches?
 Restricted until backedge yieldpoints are inserted to
 avoid creating irreducible control flow by duplicating
 a conditional branch in a loop header into a block outside the
 loop, thus creating two loop entry blocks.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BranchOptimizations(int, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BranchOptimizations</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.127">BranchOptimizations</a>(int&nbsp;level,
                   boolean&nbsp;mayReorderCode,
                   boolean&nbsp;mayDuplicateCondBranches)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>level</code> - the minimum optimization level at which the branch
              optimizations should be performed.</dd><dd><code>mayReorderCode</code> - are we allowed to change the code order?</dd><dd><code>mayDuplicateCondBranches</code> - are we allowed to duplicate conditional branches?</dd></dl>
</li>
</ul>
<a name="BranchOptimizations(int, boolean, boolean, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BranchOptimizations</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.140">BranchOptimizations</a>(int&nbsp;level,
                   boolean&nbsp;mayReorderCode,
                   boolean&nbsp;mayDuplicateCondBranches,
                   boolean&nbsp;simplify)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>level</code> - the minimum optimization level at which the branch
              optimizations should be performed.</dd><dd><code>mayReorderCode</code> - are we allowed to change the code order?</dd><dd><code>mayDuplicateCondBranches</code> - are we allowed to duplicate conditional branches?</dd><dd><code>simplify</code> - simplify prior to optimizing?</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="optimizeBranchInstruction(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>optimizeBranchInstruction</h4>
<pre>protected&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.157">optimizeBranchInstruction</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;s,
                                <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">This method actually does the work of attempting to
 peephole optimize a branch instruction.
 See Muchnick ~p.590</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html#optimizeBranchInstruction(org.jikesrvm.compilers.opt.ir.IR,%20org.jikesrvm.compilers.opt.ir.Instruction,%20org.jikesrvm.compilers.opt.ir.BasicBlock)">optimizeBranchInstruction</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html" title="class in org.jikesrvm.compilers.opt.controlflow">BranchOptimizationDriver</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - the containing IR</dd><dd><code>s</code> - the branch instruction to optimize</dd><dd><code>bb</code> - the containing basic block</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if an optimization was applied, <code>false</code> otherwise</dd></dl>
</li>
</ul>
<a name="processGoto(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processGoto</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.199">processGoto</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                  <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;g,
                  <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">Perform optimizations for a Goto.

 <p> Patterns:
 <pre>
    1)      GOTO A       replaced by  GOTO B
         A: GOTO B

    2)      GOTO A       replaced by  IF .. GOTO B
         A: IF .. GOTO B              GOTO C
         C: ...
    3)   GOTO next instruction eliminated
    4)      GOTO A       replaced by  GOTO B
         A: LABEL
            BBEND
         B:
    5)   GOTO BBn where BBn has exactly one in edge
         - move BBn immediately after the GOTO in the code order,
           so that pattern 3) will create a fallthrough
 <pre>

 <p> Precondition: Goto.conforms(g)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - governing IR</dd><dd><code>g</code> - the instruction to optimize</dd><dd><code>bb</code> - the basic block holding g</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if made a transformation</dd></dl>
</li>
</ul>
<a name="processConditionalBranch(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processConditionalBranch</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.307">processConditionalBranch</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                               <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                               <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">Perform optimizations for a conditional branch.

 <pre>
 1)   IF .. GOTO A          replaced by  IF .. GOTO B
      ...
   A: GOTO B
 2)   conditional branch to next instruction eliminated
 3)   IF (condition) GOTO A  replaced by  IF (!condition) GOTO B
      GOTO B                           A: ...
   A: ...
 4) special case to generate Boolean compare opcode
 5) special case to generate conditional move sequence
 6)   IF .. GOTO A       replaced by  IF .. GOTO B
   A: LABEL
      BBEND
   B:
 7)  fallthrough to a goto: replicate goto to enable other optimizations.
 </pre>

 <p> Precondition: IfCmp.conforms(cb)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - the governing IR</dd><dd><code>cb</code> - the instruction to optimize</dd><dd><code>bb</code> - the basic block holding if</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff made a transformation</dd></dl>
</li>
</ul>
<a name="processInlineGuard(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processInlineGuard</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.412">processInlineGuard</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                         <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                         <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">Perform optimizations for an inline guard.

 <p> Precondition: InlineGuard.conforms(cb)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - the governing IR</dd><dd><code>cb</code> - the instruction to optimize</dd><dd><code>bb</code> - the basic block holding if</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff made a transformation</dd></dl>
</li>
</ul>
<a name="processTwoTargetConditionalBranch(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTwoTargetConditionalBranch</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.476">processTwoTargetConditionalBranch</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">Perform optimizations for a two way conditional branch.

 <p> Precondition: IfCmp2.conforms(cb)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - the governing IR</dd><dd><code>cb</code> - the instruction to optimize</dd><dd><code>bb</code> - the basic block holding if</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff made a transformation</dd></dl>
</li>
</ul>
<a name="isFlipCandidate(org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.Instruction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFlipCandidate</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.559">isFlipCandidate</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                      <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;target)</pre>
<div class="block">Is a conditional branch a candidate to be flipped?
 See comment 3) of processConditionalBranch

 <p> Precondition: IfCmp.conforms(cb)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cb</code> - the conditional branch instruction</dd><dd><code>target</code> - the target instruction (real instruction) of the conditional
               branch</dd>
<dt><span class="strong">Returns:</span></dt><dd>boolean result</dd></dl>
</li>
</ul>
<a name="flipConditionalBranch(org.jikesrvm.compilers.opt.ir.Instruction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flipConditionalBranch</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.582">flipConditionalBranch</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb)</pre>
<div class="block">Flip a conditional branch and remove the trailing goto.
 See comment 3) of processConditionalBranch

 <p> Precondition isFlipCandidate(cb)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cb</code> - the conditional branch instruction</dd></dl>
</li>
</ul>
<a name="booleanCompareHelper(org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.operand.RegisterOperand, org.jikesrvm.compilers.opt.ir.operand.Operand, org.jikesrvm.compilers.opt.ir.operand.Operand, org.jikesrvm.compilers.opt.ir.operand.ConditionOperand)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>booleanCompareHelper</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.614">booleanCompareHelper</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/RegisterOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">RegisterOperand</a>&nbsp;res,
                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;val1,
                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/Operand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">Operand</a>&nbsp;val2,
                        <a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/ConditionOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">ConditionOperand</a>&nbsp;cond)</pre>
<div class="block">Generate a boolean operation opcode

 <pre>
 1) IF br != 0 THEN x=1 ELSE x=0       replaced by INT_MOVE x=br
    IF br == 0 THEN x=0 ELSE x=1
 2) IF br == 0 THEN x=1 ELSE x=0       replaced by BOOLEAN_NOT x=br
    IF br != 0 THEN x=0 ELSE x=1
 3) IF v1 ~ v2 THEN x=1 ELSE x=0       replaced by BOOLEAN_CMP x=v1,v2,~
 </pre></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cb</code> - conditional branch instruction</dd><dd><code>res</code> - the operand for result</dd><dd><code>val1</code> - value being compared</dd><dd><code>val2</code> - value being compared with</dd><dd><code>cond</code> - comparison condition</dd></dl>
</li>
</ul>
<a name="generateCondMove(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.ir.BasicBlock, org.jikesrvm.compilers.opt.ir.Instruction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateCondMove</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.696">generateCondMove</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                       <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                       <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb)</pre>
<div class="block">Attempt to generate a straight-line sequence using conditional move
 instructions, to replace a diamond control flow structure.

 <p>Suppose we have the following code, where e{n} is an expression:
 <pre>
 if (a op b) {
   x = e2;
   y = e3;
 } else {
   z = e4;
   x = e5;
 }
 </pre>
 We would transform this to:
 <pre>
 t1 = a;
 t2 = b;
 t3 = e2;
 t4 = e3;
 t5 = e4;
 t6 = e5;
 COND MOVE [if (t1 op t2) x := t3 else x := t6 ];
 COND MOVE [if (t1 op t2) y := t4 else y := y];
 COND MOVE [if (t1 op t2) z := z  else z := t5];
 </pre>

 <p>Note that we rely on other optimizations (eg. copy propagation) to
 clean up some of this unnecessary mess.

 <p>Note that in this example, we've increased the shortest path by 2
 expression evaluations, 2 moves, and 3 cond moves, but eliminated one
 conditional branch.

 <p>We apply a cost heuristic to guide this transformation:
 We will eliminate a conditional branch iff it increases the shortest
 path by no more than 'k' operations.  Currently, we count each
 instruction (alu, move, or cond move) as 1 evaluation.
 The parameter k is specified by OPT\_Options.COND_MOVE_CUTOFF.

 <p> In the example above, since we've increased the shortest path by
 6 instructions, we will only perform the transformation if k >= 7.

 <p> TODO items
 <ul>
 <li> consider smarter cost heuristics
 <li> enhance downstream code generation to avoid redundant evaluation
 of condition codes.
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - governing IR</dd><dd><code>bb</code> - basic block of cb</dd><dd><code>cb</code> - conditional branch instruction</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the transformation succeeds, false otherwise</dd></dl>
</li>
</ul>
<a name="fpConditionOK(org.jikesrvm.compilers.opt.ir.operand.ConditionOperand)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fpConditionOK</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.810">fpConditionOK</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/operand/ConditionOperand.html" title="class in org.jikesrvm.compilers.opt.ir.operand">ConditionOperand</a>&nbsp;c)</pre>
<div class="block">Is a specified condition operand 'safe' to transfer into an FCMP
 instruction?</div>
</li>
</ul>
<a name="hasFloatingPointDef(org.jikesrvm.compilers.opt.ir.BasicBlock, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasFloatingPointDef</h4>
<pre>private static&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.852">hasFloatingPointDef</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                          boolean&nbsp;invert)</pre>
<div class="block">Do any of the instructions in a basic block define a floating-point
 register?</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bb</code> - basic block to search</dd><dd><code>invert</code> - invert the sense of the search</dd></dl>
</li>
</ul>
<a name="hasLongDef(org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasLongDef</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.870">hasLongDef</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">Do any of the instructions in a basic block define a long
 register?</div>
</li>
</ul>
<a name="hasCMTaboo(org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasCMTaboo</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.888">hasCMTaboo</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">Do any of the instructions in a basic block preclude eliminating the
 basic block with conditional moves?</div>
</li>
</ul>
<a name="evaluateCost(org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evaluateCost</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.960">evaluateCost</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb)</pre>
<div class="block">Evaluate the cost of a basic block, in number of real instructions.</div>
</li>
</ul>
<a name="copyAndMapInstructions(org.jikesrvm.compilers.opt.ir.BasicBlock, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyAndMapInstructions</h4>
<pre>private&nbsp;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>[]&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.976">copyAndMapInstructions</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                                   <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>,<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&gt;&nbsp;map)</pre>
<div class="block">For each real non-branch instruction s in bb,
 <ul>
 <li> Copy s to s', and store s' in the returned array
 <li> Insert the function s->s' in the map
 </ul></div>
</li>
</ul>
<a name="rewriteWithTemporaries(org.jikesrvm.compilers.opt.ir.Instruction[], org.jikesrvm.compilers.opt.ir.IR)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rewriteWithTemporaries</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.1004">rewriteWithTemporaries</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>[]&nbsp;set,
                          <a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir)</pre>
<div class="block">For each in a set of instructions, rewrite every def to use a new
 temporary register.  If a rewritten def is subsequently used, then
 use the new temporary register instead.</div>
</li>
</ul>
<a name="insertBefore(org.jikesrvm.compilers.opt.ir.Instruction[], org.jikesrvm.compilers.opt.ir.Instruction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertBefore</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.1034">insertBefore</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>[]&nbsp;list,
                <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;s)</pre>
<div class="block">Insert each instruction in a list before instruction s</div>
</li>
</ul>
<a name="doCondMove(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.controlflow.Diamond, org.jikesrvm.compilers.opt.ir.Instruction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCondMove</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.1048">doCondMove</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
              <a href="../../../../../org/jikesrvm/compilers/opt/controlflow/Diamond.html" title="class in org.jikesrvm.compilers.opt.controlflow">Diamond</a>&nbsp;diamond,
              <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb)</pre>
<div class="block">Perform the transformation to replace conditional branch with a
 sequence using conditional moves.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - governing IR</dd><dd><code>diamond</code> - the IR diamond structure to replace</dd><dd><code>cb</code> - conditional branch instruction at the head of the diamond</dd></dl>
</li>
</ul>
<a name="generateBooleanCompare(org.jikesrvm.compilers.opt.ir.IR, org.jikesrvm.compilers.opt.ir.BasicBlock, org.jikesrvm.compilers.opt.ir.Instruction, org.jikesrvm.compilers.opt.ir.BasicBlock)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>generateBooleanCompare</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html#line.1187">generateBooleanCompare</a>(<a href="../../../../../org/jikesrvm/compilers/opt/ir/IR.html" title="class in org.jikesrvm.compilers.opt.ir">IR</a>&nbsp;ir,
                             <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;bb,
                             <a href="../../../../../org/jikesrvm/compilers/opt/ir/Instruction.html" title="class in org.jikesrvm.compilers.opt.ir">Instruction</a>&nbsp;cb,
                             <a href="../../../../../org/jikesrvm/compilers/opt/ir/BasicBlock.html" title="class in org.jikesrvm.compilers.opt.ir">BasicBlock</a>&nbsp;tb)</pre>
<div class="block">Attempt to generate a boolean compare opcode from a conditional branch.

 <pre>
 1)   IF .. GOTO A          replaced by  BOOLEAN_CMP x=..
      x = 0
      GOTO B
   A: x = 1
   B: ...
 </pre>

 <p> Precondition: <code>IfCmp.conforms(<i>cb</i>)</code></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ir</code> - governing IR</dd><dd><code>bb</code> - basic block of cb</dd><dd><code>cb</code> - conditional branch instruction</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the transformation succeeds, false otherwise</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BranchOptimizations.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchOptimizationDriver.html" title="class in org.jikesrvm.compilers.opt.controlflow"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/jikesrvm/compilers/opt/controlflow/BranchSimplifier.html" title="class in org.jikesrvm.compilers.opt.controlflow"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/jikesrvm/compilers/opt/controlflow/BranchOptimizations.html" target="_top">Frames</a></li>
<li><a href="BranchOptimizations.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
