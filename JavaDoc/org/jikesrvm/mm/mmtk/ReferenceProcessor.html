<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ReferenceProcessor (Jikes RVM API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ReferenceProcessor (Jikes RVM API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":9,"i4":9,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":9,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ReferenceProcessor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jikesrvm/mm/mmtk/ObjectModel.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/jikesrvm/mm/mmtk/ScanBootImage.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jikesrvm/mm/mmtk/ReferenceProcessor.html" target="_top">Frames</a></li>
<li><a href="ReferenceProcessor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.org.mmtk.vm.ReferenceProcessor">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jikesrvm.mm.mmtk</div>
<h2 title="Class ReferenceProcessor" class="title">Class ReferenceProcessor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/mmtk/vm/ReferenceProcessor.html" title="class in org.mmtk.vm">org.mmtk.vm.ReferenceProcessor</a></li>
<li>
<ul class="inheritance">
<li>org.jikesrvm.mm.mmtk.ReferenceProcessor</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.51">ReferenceProcessor</a>
extends <a href="../../../../org/mmtk/vm/ReferenceProcessor.html" title="class in org.mmtk.vm">ReferenceProcessor</a></pre>
<div class="block">This class manages SoftReferences, WeakReferences, and
 PhantomReferences. When a java/lang/ref/Reference object is created,
 its address is added to a table of pending reference objects of the
 appropriate type. An address is used so the reference will not stay
 alive during GC if it isn't in use elsewhere the mutator. During
 GC, the various lists are processed in the proper order to
 determine if any Reference objects are ready to be enqueued or
 whether referents that have died should be kept alive until the
 Reference is explicitly cleared. MMTk drives this processing and
 uses this class, via the VM interface, to scan the lists of pending
 reference objects.
 <p>
 As an optimization for generational collectors, each reference type
 maintains two queues: a nursery queue and the main queue.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.mmtk.vm.ReferenceProcessor">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.mmtk.vm.<a href="../../../../org/mmtk/vm/ReferenceProcessor.html" title="class in org.mmtk.vm">ReferenceProcessor</a></h3>
<code><a href="../../../../org/mmtk/vm/ReferenceProcessor.Semantics.html" title="enum in org.mmtk.vm">ReferenceProcessor.Semantics</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#growingTable">growingTable</a></span></code>
<div class="block">Flag to prevent a race between threads growing the reference object
 table.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#GROWTH_FACTOR">GROWTH_FACTOR</a></span></code>
<div class="block">Grow the reference object table by this multiplier
 on overflow</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#INITIAL_SIZE">INITIAL_SIZE</a></span></code>
<div class="block">Initial size of the reference object table</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../org/jikesrvm/mm/mmtk/Lock.html" title="class in org.jikesrvm.mm.mmtk">Lock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#lock">lock</a></span></code>
<div class="block">Class fields</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#maxIndex">maxIndex</a></span></code>
<div class="block">Index of the first free slot in the reference table.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#nurseryIndex">nurseryIndex</a></span></code>
<div class="block">Index into the <code>references</code> table for the start of
 the reference nursery.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#phantomReferenceProcessor">phantomReferenceProcessor</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/AddressArray.html" title="class in org.vmmagic.unboxed">AddressArray</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#references">references</a></span></code>
<div class="block">The table of reference objects for the current semantics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/mmtk/vm/ReferenceProcessor.Semantics.html" title="enum in org.mmtk.vm">ReferenceProcessor.Semantics</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#semantics">semantics</a></span></code>
<div class="block">Semantics</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#semanticsStr">semanticsStr</a></span></code>
<div class="block">Copy of semantics.toString() for use in uninterruptible code</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#softReferenceProcessor">softReferenceProcessor</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#STRESS">STRESS</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#TRACE">TRACE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#TRACE_DETAIL">TRACE_DETAIL</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#TRACE_UNREACHABLE">TRACE_UNREACHABLE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/AddressArray.html" title="class in org.vmmagic.unboxed">AddressArray</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#unforwardedReferences">unforwardedReferences</a></span></code>
<div class="block">In a MarkCompact (or similar) collector, we need to update the <code>references</code>
 field, and then update its contents.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#weakReferenceProcessor">weakReferenceProcessor</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#ReferenceProcessor-org.mmtk.vm.ReferenceProcessor.Semantics-">ReferenceProcessor</a></span>(<a href="../../../../org/mmtk/vm/ReferenceProcessor.Semantics.html" title="enum in org.mmtk.vm">ReferenceProcessor.Semantics</a>&nbsp;semantics)</code>
<div class="block">Create a reference processor for a given semantics</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#addCandidate-java.lang.ref.Reference-org.vmmagic.unboxed.ObjectReference-">addCandidate</a></span>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/Reference.html?is-external=true" title="class or interface in java.lang.ref">Reference</a>&lt;?&gt;&nbsp;ref,
            <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</code>
<div class="block">Add a reference to the list of references.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#addPhantomCandidate-java.lang.ref.PhantomReference-org.vmmagic.unboxed.ObjectReference-">addPhantomCandidate</a></span>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/PhantomReference.html?is-external=true" title="class or interface in java.lang.ref">PhantomReference</a>&lt;?&gt;&nbsp;ref,
                   <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</code>
<div class="block">Add a reference to the list of phantom references.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#addReference-java.lang.ref.Reference-org.vmmagic.unboxed.ObjectReference-">addReference</a></span>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/Reference.html?is-external=true" title="class or interface in java.lang.ref">Reference</a>&lt;?&gt;&nbsp;ref,
            <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</code>
<div class="block">Add a reference at the end of the table</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#addSoftCandidate-java.lang.ref.SoftReference-org.vmmagic.unboxed.ObjectReference-">addSoftCandidate</a></span>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/SoftReference.html?is-external=true" title="class or interface in java.lang.ref">SoftReference</a>&lt;?&gt;&nbsp;ref,
                <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</code>
<div class="block">Add a reference to the list of soft references.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#addWeakCandidate-java.lang.ref.WeakReference-org.vmmagic.unboxed.ObjectReference-">addWeakCandidate</a></span>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">WeakReference</a>&lt;?&gt;&nbsp;ref,
                <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</code>
<div class="block">Add a reference to the list of weak references.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#clear--">clear</a></span>()</code>
<div class="block">Clear the contents of the table.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#clearReferent-org.vmmagic.unboxed.ObjectReference-">clearReferent</a></span>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;newReference)</code>
<div class="block">Weak and soft references always clear the referent
 before enqueueing.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#countWaitingReferences--">countWaitingReferences</a></span>()</code>
<div class="block">Statistics and debugging</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#enqueueReference-org.vmmagic.unboxed.ObjectReference-">enqueueReference</a></span>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;addr)</code>
<div class="block">Put this Reference object on its ReferenceQueue (if it has one)
 when its referent is no longer sufficiently reachable.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#forward-org.mmtk.plan.TraceLocal-boolean-">forward</a></span>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
       boolean&nbsp;nursery)</code>
<div class="block">Iterate over all references and forward.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static <a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#get-org.mmtk.vm.ReferenceProcessor.Semantics-">get</a></span>(<a href="../../../../org/mmtk/vm/ReferenceProcessor.Semantics.html" title="enum in org.mmtk.vm">ReferenceProcessor.Semantics</a>&nbsp;semantics)</code>
<div class="block">Creates an instance of the appropriate reference type processor.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#getReference-int-">getReference</a></span>(int&nbsp;i)</code>
<div class="block">Retrieve from the reference table</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#getReferent-org.vmmagic.unboxed.ObjectReference-">getReferent</a></span>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;object)</code>
<div class="block">Get the referent from a reference.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/vmmagic/unboxed/AddressArray.html" title="class in org.vmmagic.unboxed">AddressArray</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#growReferenceTable--">growReferenceTable</a></span>()</code>
<div class="block">Grow the reference table by GROWTH_FACTOR.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#processReference-org.mmtk.plan.TraceLocal-org.vmmagic.unboxed.ObjectReference-">processReference</a></span>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;reference)</code>
<div class="block">Processes a reference with the current semantics.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#retainReferent-org.mmtk.plan.TraceLocal-org.vmmagic.unboxed.ObjectReference-">retainReferent</a></span>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
              <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;reference)</code>
<div class="block">This method deals only with soft references.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#scan-org.mmtk.plan.TraceLocal-boolean-boolean-">scan</a></span>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
    boolean&nbsp;nursery,
    boolean&nbsp;retain)</code>
<div class="block">Scan through the list of references.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#setReference-int-org.vmmagic.unboxed.ObjectReference-">setReference</a></span>(int&nbsp;i,
            <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;ref)</code>
<div class="block">Update the reference table</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#setReferent-org.vmmagic.unboxed.ObjectReference-org.vmmagic.unboxed.ObjectReference-">setReferent</a></span>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;ref,
           <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</code>
<div class="block">Set the referent in a reference.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="lock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>private static final&nbsp;<a href="../../../../org/jikesrvm/mm/mmtk/Lock.html" title="class in org.jikesrvm.mm.mmtk">Lock</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.57">lock</a></pre>
<div class="block">Class fields</div>
</li>
</ul>
<a name="softReferenceProcessor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>softReferenceProcessor</h4>
<pre>private static final&nbsp;<a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.59">softReferenceProcessor</a></pre>
</li>
</ul>
<a name="weakReferenceProcessor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>weakReferenceProcessor</h4>
<pre>private static final&nbsp;<a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.61">weakReferenceProcessor</a></pre>
</li>
</ul>
<a name="phantomReferenceProcessor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>phantomReferenceProcessor</h4>
<pre>private static final&nbsp;<a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.63">phantomReferenceProcessor</a></pre>
</li>
</ul>
<a name="TRACE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TRACE</h4>
<pre>private static final&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.67">TRACE</a></pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ReferenceProcessor.TRACE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="TRACE_UNREACHABLE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TRACE_UNREACHABLE</h4>
<pre>private static final&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.68">TRACE_UNREACHABLE</a></pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ReferenceProcessor.TRACE_UNREACHABLE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="TRACE_DETAIL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TRACE_DETAIL</h4>
<pre>private static final&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.69">TRACE_DETAIL</a></pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ReferenceProcessor.TRACE_DETAIL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="STRESS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STRESS</h4>
<pre>private static final&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.70">STRESS</a></pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ReferenceProcessor.STRESS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="INITIAL_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INITIAL_SIZE</h4>
<pre>private static final&nbsp;int <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.73">INITIAL_SIZE</a></pre>
<div class="block">Initial size of the reference object table</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ReferenceProcessor.INITIAL_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="GROWTH_FACTOR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROWTH_FACTOR</h4>
<pre>private static final&nbsp;double <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.79">GROWTH_FACTOR</a></pre>
<div class="block">Grow the reference object table by this multiplier
 on overflow</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.mm.mmtk.ReferenceProcessor.GROWTH_FACTOR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="references">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>references</h4>
<pre>private volatile&nbsp;<a href="../../../../org/vmmagic/unboxed/AddressArray.html" title="class in org.vmmagic.unboxed">AddressArray</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.89">references</a></pre>
<div class="block">The table of reference objects for the current semantics</div>
</li>
</ul>
<a name="unforwardedReferences">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unforwardedReferences</h4>
<pre>private volatile&nbsp;<a href="../../../../org/vmmagic/unboxed/AddressArray.html" title="class in org.vmmagic.unboxed">AddressArray</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.97">unforwardedReferences</a></pre>
<div class="block">In a MarkCompact (or similar) collector, we need to update the <code>references</code>
 field, and then update its contents.  We implement this by saving the pointer in
 this untraced field for use during the <code>forward</code> pass.</div>
</li>
</ul>
<a name="nurseryIndex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nurseryIndex</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.103">nurseryIndex</a></pre>
<div class="block">Index into the <code>references</code> table for the start of
 the reference nursery.</div>
</li>
</ul>
<a name="maxIndex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxIndex</h4>
<pre>private volatile&nbsp;int <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.108">maxIndex</a></pre>
<div class="block">Index of the first free slot in the reference table.</div>
</li>
</ul>
<a name="growingTable">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>growingTable</h4>
<pre>private volatile&nbsp;boolean <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.114">growingTable</a></pre>
<div class="block">Flag to prevent a race between threads growing the reference object
 table.</div>
</li>
</ul>
<a name="semantics">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>semantics</h4>
<pre>private final&nbsp;<a href="../../../../org/mmtk/vm/ReferenceProcessor.Semantics.html" title="enum in org.mmtk.vm">ReferenceProcessor.Semantics</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.119">semantics</a></pre>
<div class="block">Semantics</div>
</li>
</ul>
<a name="semanticsStr">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>semanticsStr</h4>
<pre>private final&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.122">semanticsStr</a></pre>
<div class="block">Copy of semantics.toString() for use in uninterruptible code</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReferenceProcessor-org.mmtk.vm.ReferenceProcessor.Semantics-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReferenceProcessor</h4>
<pre>private&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.131">ReferenceProcessor</a>(<a href="../../../../org/mmtk/vm/ReferenceProcessor.Semantics.html" title="enum in org.mmtk.vm">ReferenceProcessor.Semantics</a>&nbsp;semantics)</pre>
<div class="block">Create a reference processor for a given semantics</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>semantics</code> - the semantics this processor should use
  (i.e. the types of references that it will process)</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="get-org.mmtk.vm.ReferenceProcessor.Semantics-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public static&nbsp;<a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html" title="class in org.jikesrvm.mm.mmtk">ReferenceProcessor</a>&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.144">get</a>(<a href="../../../../org/mmtk/vm/ReferenceProcessor.Semantics.html" title="enum in org.mmtk.vm">ReferenceProcessor.Semantics</a>&nbsp;semantics)</pre>
<div class="block">Creates an instance of the appropriate reference type processor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>semantics</code> - the semantics that the reference processor should
  use (i.e. the type of references that it will process)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the reference processor</dd>
</dl>
</li>
</ul>
<a name="addReference-java.lang.ref.Reference-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addReference</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.160">addReference</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/Reference.html?is-external=true" title="class or interface in java.lang.ref">Reference</a>&lt;?&gt;&nbsp;ref,
                          <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</pre>
<div class="block">Add a reference at the end of the table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ref</code> - The reference to add</dd>
<dd><code>referent</code> - the object pointed to by the reference</dd>
</dl>
</li>
</ul>
<a name="setReference-int-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setReference</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.172">setReference</a>(int&nbsp;i,
                          <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;ref)</pre>
<div class="block">Update the reference table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>i</code> - The table index</dd>
<dd><code>ref</code> - The reference to insert</dd>
</dl>
</li>
</ul>
<a name="getReference-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReference</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.186">getReference</a>(int&nbsp;i)</pre>
<div class="block">Retrieve from the reference table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>i</code> - Table index</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The reference object at index i</dd>
</dl>
</li>
</ul>
<a name="growReferenceTable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>growReferenceTable</h4>
<pre>private&nbsp;<a href="../../../../org/vmmagic/unboxed/AddressArray.html" title="class in org.vmmagic.unboxed">AddressArray</a>&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.202">growReferenceTable</a>()</pre>
<div class="block">Grow the reference table by GROWTH_FACTOR.

 <p>Marked as UninterruptibleNoWarn because it can GC when it allocates, but
 the rest of the code can't tolerate GC.

 <p>This method is called without the reference processor lock held,
 but with the flag <code>growingTable</code> set.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the start address of the new reference table</dd>
</dl>
</li>
</ul>
<a name="addCandidate-java.lang.ref.Reference-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCandidate</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.225">addCandidate</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/Reference.html?is-external=true" title="class or interface in java.lang.ref">Reference</a>&lt;?&gt;&nbsp;ref,
                          <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</pre>
<div class="block">Add a reference to the list of references.  This method is responsible
 for installing the  address of the referent into the Reference object
 so that the referent is traced at all yield points before the Reference
 is correctly installed in the reference table.

 (SJF: This method must NOT be inlined into an inlined allocation
 sequence, since it contains a lock!)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>referent</code> - The referent of the reference</dd>
<dd><code>ref</code> - The reference to add</dd>
</dl>
</li>
</ul>
<a name="forward-org.mmtk.plan.TraceLocal-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forward</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.282">forward</a>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                    boolean&nbsp;nursery)</pre>
<div class="block">Iterate over all references and forward.
 <p>
 Collectors like MarkCompact determine liveness and move objects
 using separate traces.
 <p>
 Currently ignores the nursery hint.
 <p>
 TODO parallelise this code</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html#forward-org.mmtk.plan.TraceLocal-boolean-">forward</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html" title="class in org.mmtk.vm">ReferenceProcessor</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>trace</code> - The MMTk trace to forward to</dd>
<dd><code>nursery</code> - The nursery collection hint</dd>
</dl>
</li>
</ul>
<a name="clear--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.304">clear</a>()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html#clear--">ReferenceProcessor</a></code></span></div>
<div class="block">Clear the contents of the table. This is called when reference types are
 disabled to make it easier for VMs to change this setting at runtime.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html#clear--">clear</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html" title="class in org.mmtk.vm">ReferenceProcessor</a></code></dd>
</dl>
</li>
</ul>
<a name="scan-org.mmtk.plan.TraceLocal-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scan</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.321">scan</a>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                 boolean&nbsp;nursery,
                 boolean&nbsp;retain)</pre>
<div class="block">Scan through the list of references. Calls ReferenceProcessor's
 processReference method for each reference and builds a new
 list of those references still active.
 <p>
 Depending on the value of <code>nursery</code>, we will either
 scan all references, or just those created since the last scan.
 <p>
 TODO parallelise this code</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html#scan-org.mmtk.plan.TraceLocal-boolean-boolean-">scan</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html" title="class in org.mmtk.vm">ReferenceProcessor</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nursery</code> - Scan only the newly created references</dd>
<dd><code>trace</code> - the thread local trace element.</dd>
<dd><code>retain</code> - whether to retain those references whose referents are not
  reachable</dd>
</dl>
</li>
</ul>
<a name="retainReferent-org.mmtk.plan.TraceLocal-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retainReferent</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.369">retainReferent</a>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                              <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;reference)</pre>
<div class="block">This method deals only with soft references. It retains the referent
 if the reference is definitely reachable.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reference</code> - the address of the reference. This may or may not
 be the address of a heap object, depending on the VM.</dd>
<dd><code>trace</code> - the thread local trace element.</dd>
</dl>
</li>
</ul>
<a name="enqueueReference-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enqueueReference</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.412">enqueueReference</a>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;addr)</pre>
<div class="block">Put this Reference object on its ReferenceQueue (if it has one)
 when its referent is no longer sufficiently reachable. The
 definition of "reachable" is defined by the semantics of the
 particular subclass of Reference.
 <p>
 The implementation of this routine is determined by the the
 implementation of java.lang.ref.ReferenceQueue in the class library.
 It is in this class rather than the public Reference class to
 ensure that Jikes has a safe way of enqueueing the object,
 one that cannot be overridden by the application program.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addr</code> - the address of the Reference object</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the reference was enqueued</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/ReferenceQueue.html?is-external=true" title="class or interface in java.lang.ref"><code>ReferenceQueue</code></a></dd>
</dl>
</li>
</ul>
<a name="addSoftCandidate-java.lang.ref.SoftReference-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSoftCandidate</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.423">addSoftCandidate</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/SoftReference.html?is-external=true" title="class or interface in java.lang.ref">SoftReference</a>&lt;?&gt;&nbsp;ref,
                                    <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</pre>
<div class="block">Add a reference to the list of soft references.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ref</code> - the SoftReference to add</dd>
<dd><code>referent</code> - the object that the reference points to</dd>
</dl>
</li>
</ul>
<a name="addWeakCandidate-java.lang.ref.WeakReference-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addWeakCandidate</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.433">addWeakCandidate</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">WeakReference</a>&lt;?&gt;&nbsp;ref,
                                    <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</pre>
<div class="block">Add a reference to the list of weak references.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ref</code> - the WeakReference to add</dd>
<dd><code>referent</code> - the object that the reference points to</dd>
</dl>
</li>
</ul>
<a name="addPhantomCandidate-java.lang.ref.PhantomReference-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addPhantomCandidate</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.443">addPhantomCandidate</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/PhantomReference.html?is-external=true" title="class or interface in java.lang.ref">PhantomReference</a>&lt;?&gt;&nbsp;ref,
                                       <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</pre>
<div class="block">Add a reference to the list of phantom references.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ref</code> - the PhantomReference to add</dd>
<dd><code>referent</code> - the object that the reference points to</dd>
</dl>
</li>
</ul>
<a name="processReference-org.mmtk.plan.TraceLocal-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processReference</h4>
<pre>public&nbsp;<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.467">processReference</a>(<a href="../../../../org/mmtk/plan/TraceLocal.html" title="class in org.mmtk.plan">TraceLocal</a>&nbsp;trace,
                                        <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;reference)</pre>
<div class="block">Processes a reference with the current semantics.
 <p>
 This method deals with  a soft reference as if it were a weak reference, i.e.
 it does not retain the referent. To retain the referent, use
 <a href="../../../../org/jikesrvm/mm/mmtk/ReferenceProcessor.html#retainReferent-org.mmtk.plan.TraceLocal-org.vmmagic.unboxed.ObjectReference-"><code>retainReferent(TraceLocal, ObjectReference)</code></a> followed by a transitive
 closure phase.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>reference</code> - the address of the reference. This may or may not
 be the address of a heap object, depending on the VM.</dd>
<dd><code>trace</code> - the thread local trace element.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an updated reference (e.g. with a new address) if the reference
  is still live, <code>ObjectReference.nullReference()</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="clearReferent-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearReferent</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.567">clearReferent</a>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;newReference)</pre>
<div class="block">Weak and soft references always clear the referent
 before enqueueing. We don't actually call
 <code>Reference.clear()</code> as the user could have overridden the
 implementation and we don't want any side-effects to
 occur.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newReference</code> - the reference whose referent is to
  be cleared</dd>
</dl>
</li>
</ul>
<a name="getReferent-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReferent</h4>
<pre>protected&nbsp;<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.582">getReferent</a>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;object)</pre>
<div class="block">Get the referent from a reference.  For Java the reference
 is a Reference object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>object</code> - the object reference.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the referent object reference.</dd>
</dl>
</li>
</ul>
<a name="setReferent-org.vmmagic.unboxed.ObjectReference-org.vmmagic.unboxed.ObjectReference-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setReferent</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.593">setReferent</a>(<a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;ref,
                           <a href="../../../../org/vmmagic/unboxed/ObjectReference.html" title="class in org.vmmagic.unboxed">ObjectReference</a>&nbsp;referent)</pre>
<div class="block">Set the referent in a reference.  For Java the reference is
 a Reference object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ref</code> - the ObjectReference for the reference (confusing eh?).</dd>
<dd><code>referent</code> - the referent object reference.</dd>
</dl>
</li>
</ul>
<a name="countWaitingReferences--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>countWaitingReferences</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/jikesrvm/mm/mmtk/ReferenceProcessor.html#line.603">countWaitingReferences</a>()</pre>
<div class="block">Statistics and debugging</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html#countWaitingReferences--">countWaitingReferences</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/mmtk/vm/ReferenceProcessor.html" title="class in org.mmtk.vm">ReferenceProcessor</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of references objects on the queue</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ReferenceProcessor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jikesrvm/mm/mmtk/ObjectModel.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/jikesrvm/mm/mmtk/ScanBootImage.html" title="class in org.jikesrvm.mm.mmtk"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jikesrvm/mm/mmtk/ReferenceProcessor.html" target="_top">Frames</a></li>
<li><a href="ReferenceProcessor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.org.mmtk.vm.ReferenceProcessor">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
