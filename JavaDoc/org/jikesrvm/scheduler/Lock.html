<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>Lock (Jikes RVM API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Lock (Jikes RVM API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Lock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jikesrvm/scheduler/LightMonitor.html" title="class in org.jikesrvm.scheduler"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jikesrvm/scheduler/Lock.AppRunStartMonitor.html" title="class in org.jikesrvm.scheduler"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jikesrvm/scheduler/Lock.html" target="_top">Frames</a></li>
<li><a href="Lock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jikesrvm.scheduler</div>
<h2 title="Class Lock" class="title">Class Lock</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.jikesrvm.scheduler.Lock</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/jikesrvm/Constants.html" title="interface in org.jikesrvm">Constants</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html" title="interface in org.jikesrvm">HeapLayoutConstants</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html" title="interface in org.jikesrvm.objectmodel">ThinLockConstants</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html" title="interface in org.jikesrvm.objectmodel">TIBLayoutConstants</a>, <a href="../../../org/jikesrvm/SizeConstants.html" title="interface in org.jikesrvm">SizeConstants</a></dd>
</dl>
<hr>
<br>
<pre>public final class <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.118">Lock</a>
extends <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../org/jikesrvm/Constants.html" title="interface in org.jikesrvm">Constants</a></pre>
<div class="block">Lock provides RVM support for monitors and Java level
 synchronization.

 <p>
 This class may be decomposed into four sections:
 <OL>
 <LI> support for synchronization methods of java.lang.Object,
 <LI> heavy weight locking mechanism,
 <LI> management of heavy weight locks, and
 <LI> debugging and performance tuning support.
 </OL>
 </p>

 <p><STRONG>Requirement 1:</STRONG>
 It must be possible to lock an object when allocations are not
 allowed.
 </p>

 <p><STRONG>Requirement 2:</STRONG>
 After a lock has been obtained, the code of this class must return
 without allowing a thread switch.  (The <a href="../../../org/jikesrvm/compilers/baseline/ia32/BaselineExceptionDeliverer.html#unwindStackFrame(org.jikesrvm.compilers.common.CompiledMethod,%20org.jikesrvm.ArchitectureSpecific.Registers)"><code>exception handler</code></a>
 of the baseline compiler assumes that until lock() returns the lock
 has not been obtained.)
 </p>

 <p><STRONG>Section 1:</STRONG>
 support for <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang"><code>Object.notify()</code></a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang"><code>Object.notifyAll()</code></a>, and <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang"><code>Object.wait()</code></a>.
 When these methods are called, the indicated object must be locked
 by the current thread.  <p>

 <p><STRONG>Section 2:</STRONG>
 has two sections.  <EM>Section 2a:</EM> locks (and unlocking)
 objects with heavy-weight locks associated with them.  <EM>Section
 2b:</EM> associates (and disassociates) heavy-weight locks with
 objects.
 </p>

 <p><STRONG>Section 3:</STRONG>
 Allocates (and frees) heavy weight locks consistent with Requirement
 1.
 </p>

 <p><STRONG>Section 4:</STRONG>
 debugging and performance tuning stuff.
 </p>

 <p>
 The following performance tuning issues have not yet been addressed
 adaquately:
 <OL>
 <LI> <EM>What to do if the attempt to lock an object fails?</EM>  There
 are three choices: try again (busy-wait), yield and then try again,
 inflate the lock and yield to the heavy-weight lock's entering
 queue.  Currently, yield n times, then inflate.
 (This seemed to be best for the portBOB benchmark on a 12-way AIX
 SMP in the Fall of '99.)
 <LI> <EM>When should a heavy-weight lock be deflated?</EM>  Currently,
 deflation happens when the lock is unlocked with nothing on either
 of its queues.  Probably better, would be to periodically (what
 period?) examine heavy-weight locks and deflate any that havn't
 been held for a while (how long?).
 <LI> <EM>How many heavy-weight locks are needed? and how should they be
 managed?</EM>  Currently, each processor maintains a pool of free
 locks.  When a lock is inflated by a processor it is taken from
 this pool and when a lock is deflated by a processor it gets added
 to the processors pool.  Since inflation can happen on one processor
 and deflation on another, this can create an imbalance.  It might
 be worth investigating a scheme for balancing these local pools.
 <LI> <EM>Is there any advantage to using the <a href="../../../org/jikesrvm/scheduler/SpinLock.html#tryLock()"><code>SpinLock.tryLock()</code></a>
 method?</EM>
 </OL>
 Once these questions, and the issue of using MCS locking in <a href="../../../org/jikesrvm/scheduler/SpinLock.html" title="class in org.jikesrvm.scheduler"><code>SpinLock</code></a>,
 have been investigated, then a larger performance issue
 comes into view.  A number of different light-weight locking schemes have
 been proposed over the years (see last several OOPSLA's).  It should be
 possible to implement each of them in RVM and compare their performance.
 </p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang"><code>Object</code></a>, 
<a href="../../../org/jikesrvm/scheduler/ThinLock.html" title="class in org.jikesrvm.scheduler"><code>ThinLock</code></a>, 
<a href="../../../org/jikesrvm/scheduler/SpinLock.html" title="class in org.jikesrvm.scheduler"><code>SpinLock</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.AppRunStartMonitor.html" title="class in org.jikesrvm.scheduler">Lock.AppRunStartMonitor</a></strong></code>
<div class="block">Initialize counts in preparation for gathering statistics</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.ExitMonitor.html" title="class in org.jikesrvm.scheduler">Lock.ExitMonitor</a></strong></code>
<div class="block">Report statistics at the end of execution.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#active">active</a></strong></code>
<div class="block">Is this lock currently being used?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#chunksAllocated">chunksAllocated</a></strong></code>
<div class="block">The number of chunks in the spine that have been physically allocated</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#deflations">deflations</a></strong></code>
<div class="block">Number of deflations</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../org/jikesrvm/scheduler/ThreadQueue.html" title="class in org.jikesrvm.scheduler">ThreadQueue</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#entering">entering</a></strong></code>
<div class="block">Queue for entering the lock, guarded by mutex.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#globalFreeLock">globalFreeLock</a></strong></code>
<div class="block">A global lock free list head</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#globalFreeLocks">globalFreeLocks</a></strong></code>
<div class="block">the number of locks held on the global free list.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#globalLocksAllocated">globalLocksAllocated</a></strong></code>
<div class="block">the total number of allocation operations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#globalLocksFreed">globalLocksFreed</a></strong></code>
<div class="block">the total number of free operations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#index">index</a></strong></code>
<div class="block">This lock's index in the lock table</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#INITIAL_CHUNKS">INITIAL_CHUNKS</a></strong></code>
<div class="block">The number of chunks to allocate on startup</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#LOCK_CHUNK_MASK">LOCK_CHUNK_MASK</a></strong></code>
<div class="block">The mask used to get the chunk-level index</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#LOCK_CHUNK_SIZE">LOCK_CHUNK_SIZE</a></strong></code>
<div class="block">The size of each chunk in the spine</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#LOCK_SPINE_SIZE">LOCK_SPINE_SIZE</a></strong></code>
<div class="block">The (fixed) number of entries in the lock table spine</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="../../../org/jikesrvm/scheduler/SpinLock.html" title="class in org.jikesrvm.scheduler">SpinLock</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#lockAllocationMutex">lockAllocationMutex</a></strong></code>
<div class="block">Used during allocation of locks within the table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#lockedObject">lockedObject</a></strong></code>
<div class="block">The object being locked (if any).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#lockOperations">lockOperations</a></strong></code>
<div class="block">Number of lock operations</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>[][]</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#locks">locks</a></strong></code>
<div class="block">The table of locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#LOG_LOCK_CHUNK_SIZE">LOG_LOCK_CHUNK_SIZE</a></strong></code>
<div class="block">The log size of each chunk in the spine</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#MAX_LOCKS">MAX_LOCKS</a></strong></code>
<div class="block">The maximum possible number of locks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/jikesrvm/scheduler/SpinLock.html" title="class in org.jikesrvm.scheduler">SpinLock</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#mutex">mutex</a></strong></code>
<div class="block">A spin lock to handle contention for the data structures of this lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#nextFreeLock">nextFreeLock</a></strong></code>
<div class="block">The next free lock on the free lock list</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#nextLockIndex">nextLockIndex</a></strong></code>
<div class="block">The number of locks allocated (these may either be in use, on a global
 freelist, or on a thread's freelist.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#ownerId">ownerId</a></strong></code>
<div class="block">The id of the thread that owns this lock (if any).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#recursionCount">recursionCount</a></strong></code>
<div class="block">The number of times the owning thread (if any) has acquired this lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#STATS">STATS</a></strong></code>
<div class="block">Control the gathering of statistics</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#tentativeMicrolocking">tentativeMicrolocking</a></strong></code>
<div class="block">Should we give up or persist in the attempt to get a heavy-weight lock,
 if its <code>mutex</code> microlock is held by another procesor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#trace">trace</a></strong></code>
<div class="block">do debug tracing?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#unlockOperations">unlockOperations</a></strong></code>
<div class="block">Number of unlock operations</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../org/jikesrvm/scheduler/ThreadQueue.html" title="class in org.jikesrvm.scheduler">ThreadQueue</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#waiting">waiting</a></strong></code>
<div class="block">Queue for waiting on a notify, guarded by mutex as well.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.jikesrvm.Constants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.jikesrvm.<a href="../../../org/jikesrvm/Constants.html" title="interface in org.jikesrvm">Constants</a></h3>
<code><a href="../../../org/jikesrvm/Constants.html#NOT_REACHED">NOT_REACHED</a>, <a href="../../../org/jikesrvm/Constants.html#REFLECTION_FPRS_BITS">REFLECTION_FPRS_BITS</a>, <a href="../../../org/jikesrvm/Constants.html#REFLECTION_FPRS_MASK">REFLECTION_FPRS_MASK</a>, <a href="../../../org/jikesrvm/Constants.html#REFLECTION_GPRS_BITS">REFLECTION_GPRS_BITS</a>, <a href="../../../org/jikesrvm/Constants.html#REFLECTION_GPRS_MASK">REFLECTION_GPRS_MASK</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.jikesrvm.objectmodel.ThinLockConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.jikesrvm.objectmodel.<a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html" title="interface in org.jikesrvm.objectmodel">ThinLockConstants</a></h3>
<code><a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_DEDICATED_U16_OFFSET">TL_DEDICATED_U16_OFFSET</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_DEDICATED_U16_SHIFT">TL_DEDICATED_U16_SHIFT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_LOCK_COUNT_MASK">TL_LOCK_COUNT_MASK</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_LOCK_COUNT_SHIFT">TL_LOCK_COUNT_SHIFT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_LOCK_COUNT_UNIT">TL_LOCK_COUNT_UNIT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_LOCK_ID_MASK">TL_LOCK_ID_MASK</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_LOCK_ID_SHIFT">TL_LOCK_ID_SHIFT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_NUM_BITS_RC">TL_NUM_BITS_RC</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_NUM_BITS_STAT">TL_NUM_BITS_STAT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_NUM_BITS_TID">TL_NUM_BITS_TID</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_STAT_BIASABLE">TL_STAT_BIASABLE</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_STAT_FAT">TL_STAT_FAT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_STAT_MASK">TL_STAT_MASK</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_STAT_SHIFT">TL_STAT_SHIFT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_STAT_THIN">TL_STAT_THIN</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_THREAD_ID_MASK">TL_THREAD_ID_MASK</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_THREAD_ID_SHIFT">TL_THREAD_ID_SHIFT</a>, <a href="../../../org/jikesrvm/objectmodel/ThinLockConstants.html#TL_UNLOCK_MASK">TL_UNLOCK_MASK</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.jikesrvm.SizeConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.jikesrvm.<a href="../../../org/jikesrvm/SizeConstants.html" title="interface in org.jikesrvm">SizeConstants</a></h3>
<code><a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_ADDRESS">BITS_IN_ADDRESS</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_BOOLEAN">BITS_IN_BOOLEAN</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_BYTE">BITS_IN_BYTE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_CHAR">BITS_IN_CHAR</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_DOUBLE">BITS_IN_DOUBLE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_EXTENT">BITS_IN_EXTENT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_FLOAT">BITS_IN_FLOAT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_INT">BITS_IN_INT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_LONG">BITS_IN_LONG</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_OFFSET">BITS_IN_OFFSET</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_PAGE">BITS_IN_PAGE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_SHORT">BITS_IN_SHORT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BITS_IN_WORD">BITS_IN_WORD</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_ADDRESS">BYTES_IN_ADDRESS</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_BOOLEAN">BYTES_IN_BOOLEAN</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_BYTE">BYTES_IN_BYTE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_CHAR">BYTES_IN_CHAR</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_DOUBLE">BYTES_IN_DOUBLE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_EXTENT">BYTES_IN_EXTENT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_FLOAT">BYTES_IN_FLOAT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_INT">BYTES_IN_INT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_LONG">BYTES_IN_LONG</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_OFFSET">BYTES_IN_OFFSET</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_PAGE">BYTES_IN_PAGE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_SHORT">BYTES_IN_SHORT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#BYTES_IN_WORD">BYTES_IN_WORD</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_ADDRESS">LOG_BITS_IN_ADDRESS</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_BOOLEAN">LOG_BITS_IN_BOOLEAN</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_BYTE">LOG_BITS_IN_BYTE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_CHAR">LOG_BITS_IN_CHAR</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_DOUBLE">LOG_BITS_IN_DOUBLE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_EXTENT">LOG_BITS_IN_EXTENT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_FLOAT">LOG_BITS_IN_FLOAT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_INT">LOG_BITS_IN_INT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_LONG">LOG_BITS_IN_LONG</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_OFFSET">LOG_BITS_IN_OFFSET</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_PAGE">LOG_BITS_IN_PAGE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_SHORT">LOG_BITS_IN_SHORT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BITS_IN_WORD">LOG_BITS_IN_WORD</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_ADDRESS">LOG_BYTES_IN_ADDRESS</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_BOOLEAN">LOG_BYTES_IN_BOOLEAN</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_BYTE">LOG_BYTES_IN_BYTE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_CHAR">LOG_BYTES_IN_CHAR</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_DOUBLE">LOG_BYTES_IN_DOUBLE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_EXTENT">LOG_BYTES_IN_EXTENT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_FLOAT">LOG_BYTES_IN_FLOAT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_INT">LOG_BYTES_IN_INT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_LONG">LOG_BYTES_IN_LONG</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_OFFSET">LOG_BYTES_IN_OFFSET</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_PAGE">LOG_BYTES_IN_PAGE</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_SHORT">LOG_BYTES_IN_SHORT</a>, <a href="../../../org/jikesrvm/SizeConstants.html#LOG_BYTES_IN_WORD">LOG_BYTES_IN_WORD</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.jikesrvm.objectmodel.TIBLayoutConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.jikesrvm.objectmodel.<a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html" title="interface in org.jikesrvm.objectmodel">TIBLayoutConstants</a></h3>
<code><a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#IMT_METHOD_SLOTS">IMT_METHOD_SLOTS</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#NEEDS_DYNAMIC_LINK">NEEDS_DYNAMIC_LINK</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#TIB_ARRAY_ELEMENT_TIB_INDEX">TIB_ARRAY_ELEMENT_TIB_INDEX</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#TIB_DOES_IMPLEMENT_INDEX">TIB_DOES_IMPLEMENT_INDEX</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#TIB_FIRST_SPECIALIZED_METHOD_INDEX">TIB_FIRST_SPECIALIZED_METHOD_INDEX</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#TIB_FIRST_VIRTUAL_METHOD_INDEX">TIB_FIRST_VIRTUAL_METHOD_INDEX</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#TIB_INTERFACE_DISPATCH_TABLE_INDEX">TIB_INTERFACE_DISPATCH_TABLE_INDEX</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#TIB_SUPERCLASS_IDS_INDEX">TIB_SUPERCLASS_IDS_INDEX</a>, <a href="../../../org/jikesrvm/objectmodel/TIBLayoutConstants.html#TIB_TYPE_INDEX">TIB_TYPE_INDEX</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.jikesrvm.HeapLayoutConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.jikesrvm.<a href="../../../org/jikesrvm/HeapLayoutConstants.html" title="interface in org.jikesrvm">HeapLayoutConstants</a></h3>
<code><a href="../../../org/jikesrvm/HeapLayoutConstants.html#BAD_MAP_COMPRESSION">BAD_MAP_COMPRESSION</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_CODE_END">BOOT_IMAGE_CODE_END</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_CODE_SIZE">BOOT_IMAGE_CODE_SIZE</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_CODE_START">BOOT_IMAGE_CODE_START</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_DATA_END">BOOT_IMAGE_DATA_END</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_DATA_SIZE">BOOT_IMAGE_DATA_SIZE</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_DATA_START">BOOT_IMAGE_DATA_START</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_END">BOOT_IMAGE_END</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_RMAP_END">BOOT_IMAGE_RMAP_END</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#BOOT_IMAGE_RMAP_START">BOOT_IMAGE_RMAP_START</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#MAX_BOOT_IMAGE_RMAP_SIZE">MAX_BOOT_IMAGE_RMAP_SIZE</a>, <a href="../../../org/jikesrvm/HeapLayoutConstants.html#MAXIMUM_MAPPABLE">MAXIMUM_MAPPABLE</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#Lock()">Lock</a></strong>()</code>
<div class="block">A heavy weight lock to handle extreme contention and wait/notify
 synchronization.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#addLock(org.jikesrvm.scheduler.Lock)">addLock</a></strong>(<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;l)</code>
<div class="block">Add a lock to the lock table</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#allocate()">allocate</a></strong>()</code>
<div class="block">Delivers up an unassigned heavy-weight lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#boot()">boot</a></strong>()</code>
<div class="block">Set up callbacks to report statistics.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#countLocksHeldByThread(int)">countLocksHeldByThread</a></strong>(int&nbsp;id)</code>
<div class="block">Count number of locks held by thread</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#deflate(java.lang.Object,%20org.vmmagic.unboxed.Offset)">deflate</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o,
              <a href="../../../org/vmmagic/unboxed/Offset.html" title="class in org.vmmagic.unboxed">Offset</a>&nbsp;lockOffset)</code>
<div class="block">Disassociates this heavy-weight lock from the indicated object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#dump()">dump</a></strong>()</code>
<div class="block">Reports the state of a heavy-weight lock, via <a href="../../../org/jikesrvm/VM.html#sysWrite(org.jikesrvm.classloader.Atom)"><code>VM.sysWrite(org.jikesrvm.classloader.Atom)</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#dumpBlockedThreads()">dumpBlockedThreads</a></strong>()</code>
<div class="block">Dump threads blocked trying to get this lock</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#dumpLocks()">dumpLocks</a></strong>()</code>
<div class="block">Dump the lock table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#dumpWaitingThreads()">dumpWaitingThreads</a></strong>()</code>
<div class="block">Dump threads waiting to be notified on this lock</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#free(org.jikesrvm.scheduler.Lock)">free</a></strong>(<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;l)</code>
<div class="block">Recycles an unused heavy-weight lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#getLock(int)">getLock</a></strong>(int&nbsp;id)</code>
<div class="block">Read a lock from the lock table by id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#getLockedObject()">getLockedObject</a></strong>()</code>
<div class="block">Get the object that this lock is referring to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#getOwnerId()">getOwnerId</a></strong>()</code>
<div class="block">Get the thread id of the current owner of the lock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#getRecursionCount()">getRecursionCount</a></strong>()</code>
<div class="block">Get the lock's recursion count.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#getThreadState(org.jikesrvm.scheduler.RVMThread)">getThreadState</a></strong>(<a href="../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;t)</code>
<div class="block">scan lock queues for thread and report its state</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#growLocks(int)">growLocks</a></strong>(int&nbsp;id)</code>
<div class="block">Grow the locks table by allocating a new spine chunk.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#init()">init</a></strong>()</code>
<div class="block">Sets up the data structures for holding heavy-weight locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#isBlocked(org.jikesrvm.scheduler.RVMThread)">isBlocked</a></strong>(<a href="../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;t)</code>
<div class="block">Is this lock blocking thread t?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#isWaiting(org.jikesrvm.scheduler.RVMThread)">isWaiting</a></strong>(<a href="../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;t)</code>
<div class="block">Is this thread t waiting on this lock?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#lockHeavy(java.lang.Object)">lockHeavy</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</code>
<div class="block">Acquires this heavy-weight lock on the indicated object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#lockHeavyLocked(java.lang.Object)">lockHeavyLocked</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</code>
<div class="block">Complete the task of acquiring the heavy lock, assuming that the mutex
      is already acquired (locked).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#numLocks()">numLocks</a></strong>()</code>
<div class="block">Return the number of lock slots that have been allocated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#raiseIllegalMonitorStateException(java.lang.String,%20java.lang.Object)">raiseIllegalMonitorStateException</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;msg,
                                                                  <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#returnLock(org.jikesrvm.scheduler.Lock)">returnLock</a></strong>(<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;l)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#setLockedObject(java.lang.Object)">setLockedObject</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</code>
<div class="block">Set the object that this lock is referring to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#setOwnerId(int)">setOwnerId</a></strong>(int&nbsp;id)</code>
<div class="block">Set the owner of a lock</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#setRecursionCount(int)">setRecursionCount</a></strong>(int&nbsp;c)</code>
<div class="block">Update the lock's recursion count.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jikesrvm/scheduler/Lock.html#unlockHeavy(java.lang.Object)">unlockHeavy</a></strong>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</code>
<div class="block">Releases this heavy-weight lock on the indicated object.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="trace">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trace</h4>
<pre>protected static final&nbsp;boolean <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.124">trace</a></pre>
<div class="block">do debug tracing?</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.trace">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="STATS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STATS</h4>
<pre>public static final&nbsp;boolean <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.126">STATS</a></pre>
<div class="block">Control the gathering of statistics</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.STATS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LOCK_SPINE_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOCK_SPINE_SIZE</h4>
<pre>protected static final&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.129">LOCK_SPINE_SIZE</a></pre>
<div class="block">The (fixed) number of entries in the lock table spine</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.LOCK_SPINE_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LOG_LOCK_CHUNK_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_LOCK_CHUNK_SIZE</h4>
<pre>protected static final&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.131">LOG_LOCK_CHUNK_SIZE</a></pre>
<div class="block">The log size of each chunk in the spine</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.LOG_LOCK_CHUNK_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LOCK_CHUNK_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOCK_CHUNK_SIZE</h4>
<pre>protected static final&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.133">LOCK_CHUNK_SIZE</a></pre>
<div class="block">The size of each chunk in the spine</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.LOCK_CHUNK_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LOCK_CHUNK_MASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOCK_CHUNK_MASK</h4>
<pre>protected static final&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.135">LOCK_CHUNK_MASK</a></pre>
<div class="block">The mask used to get the chunk-level index</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.LOCK_CHUNK_MASK">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MAX_LOCKS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_LOCKS</h4>
<pre>protected static final&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.137">MAX_LOCKS</a></pre>
<div class="block">The maximum possible number of locks</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.MAX_LOCKS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="INITIAL_CHUNKS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INITIAL_CHUNKS</h4>
<pre>protected static final&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.139">INITIAL_CHUNKS</a></pre>
<div class="block">The number of chunks to allocate on startup</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.INITIAL_CHUNKS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="tentativeMicrolocking">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tentativeMicrolocking</h4>
<pre>private static final&nbsp;boolean <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.145">tentativeMicrolocking</a></pre>
<div class="block">Should we give up or persist in the attempt to get a heavy-weight lock,
 if its <code>mutex</code> microlock is held by another procesor.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.jikesrvm.scheduler.Lock.tentativeMicrolocking">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="locks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>locks</h4>
<pre>private static&nbsp;<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>[][] <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.150">locks</a></pre>
<div class="block">The table of locks.</div>
</li>
</ul>
<a name="lockAllocationMutex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockAllocationMutex</h4>
<pre>private static final&nbsp;<a href="../../../org/jikesrvm/scheduler/SpinLock.html" title="class in org.jikesrvm.scheduler">SpinLock</a> <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.152">lockAllocationMutex</a></pre>
<div class="block">Used during allocation of locks within the table.</div>
</li>
</ul>
<a name="chunksAllocated">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chunksAllocated</h4>
<pre>private static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.154">chunksAllocated</a></pre>
<div class="block">The number of chunks in the spine that have been physically allocated</div>
</li>
</ul>
<a name="nextLockIndex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextLockIndex</h4>
<pre>private static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.157">nextLockIndex</a></pre>
<div class="block">The number of locks allocated (these may either be in use, on a global
 freelist, or on a thread's freelist.</div>
</li>
</ul>
<a name="globalFreeLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>globalFreeLock</h4>
<pre>private static&nbsp;<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a> <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.162">globalFreeLock</a></pre>
<div class="block">A global lock free list head</div>
</li>
</ul>
<a name="globalFreeLocks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>globalFreeLocks</h4>
<pre>private static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.164">globalFreeLocks</a></pre>
<div class="block">the number of locks held on the global free list.</div>
</li>
</ul>
<a name="globalLocksAllocated">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>globalLocksAllocated</h4>
<pre>private static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.166">globalLocksAllocated</a></pre>
<div class="block">the total number of allocation operations.</div>
</li>
</ul>
<a name="globalLocksFreed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>globalLocksFreed</h4>
<pre>private static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.168">globalLocksFreed</a></pre>
<div class="block">the total number of free operations.</div>
</li>
</ul>
<a name="lockOperations">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockOperations</h4>
<pre>public static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.173">lockOperations</a></pre>
<div class="block">Number of lock operations</div>
</li>
</ul>
<a name="unlockOperations">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockOperations</h4>
<pre>public static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.175">unlockOperations</a></pre>
<div class="block">Number of unlock operations</div>
</li>
</ul>
<a name="deflations">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deflations</h4>
<pre>public static&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.177">deflations</a></pre>
<div class="block">Number of deflations</div>
</li>
</ul>
<a name="lockedObject">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockedObject</h4>
<pre>protected&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a> <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.184">lockedObject</a></pre>
<div class="block">The object being locked (if any).</div>
</li>
</ul>
<a name="ownerId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ownerId</h4>
<pre>protected&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.186">ownerId</a></pre>
<div class="block">The id of the thread that owns this lock (if any).</div>
</li>
</ul>
<a name="recursionCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recursionCount</h4>
<pre>protected&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.188">recursionCount</a></pre>
<div class="block">The number of times the owning thread (if any) has acquired this lock.</div>
</li>
</ul>
<a name="mutex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mutex</h4>
<pre>public final&nbsp;<a href="../../../org/jikesrvm/scheduler/SpinLock.html" title="class in org.jikesrvm.scheduler">SpinLock</a> <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.190">mutex</a></pre>
<div class="block">A spin lock to handle contention for the data structures of this lock.</div>
</li>
</ul>
<a name="active">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>active</h4>
<pre>protected&nbsp;boolean <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.192">active</a></pre>
<div class="block">Is this lock currently being used?</div>
</li>
</ul>
<a name="nextFreeLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextFreeLock</h4>
<pre>private&nbsp;<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a> <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.194">nextFreeLock</a></pre>
<div class="block">The next free lock on the free lock list</div>
</li>
</ul>
<a name="index">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>index</h4>
<pre>protected&nbsp;int <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.196">index</a></pre>
<div class="block">This lock's index in the lock table</div>
</li>
</ul>
<a name="entering">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entering</h4>
<pre><a href="../../../org/jikesrvm/scheduler/ThreadQueue.html" title="class in org.jikesrvm.scheduler">ThreadQueue</a> <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.198">entering</a></pre>
<div class="block">Queue for entering the lock, guarded by mutex.</div>
</li>
</ul>
<a name="waiting">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>waiting</h4>
<pre><a href="../../../org/jikesrvm/scheduler/ThreadQueue.html" title="class in org.jikesrvm.scheduler">ThreadQueue</a> <a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.200">waiting</a></pre>
<div class="block">Queue for waiting on a notify, guarded by mutex as well.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Lock()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Lock</h4>
<pre>public&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.206">Lock</a>()</pre>
<div class="block">A heavy weight lock to handle extreme contention and wait/notify
 synchronization.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="lockHeavy(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockHeavy</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.219">lockHeavy</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</pre>
<div class="block">Acquires this heavy-weight lock on the indicated object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>o</code> - the object to be locked</dd>
<dt><span class="strong">Returns:</span></dt><dd>true, if the lock succeeds; false, otherwise</dd></dl>
</li>
</ul>
<a name="lockHeavyLocked(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockHeavyLocked</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.232">lockHeavyLocked</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</pre>
<div class="block">Complete the task of acquiring the heavy lock, assuming that the mutex
      is already acquired (locked).</div>
</li>
</ul>
<a name="raiseIllegalMonitorStateException(java.lang.String, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>raiseIllegalMonitorStateException</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.260">raiseIllegalMonitorStateException</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;msg,
                                     <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</pre>
</li>
</ul>
<a name="unlockHeavy(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockHeavy</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.270">unlockHeavy</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</pre>
<div class="block">Releases this heavy-weight lock on the indicated object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>o</code> - the object to be unlocked</dd></dl>
</li>
</ul>
<a name="deflate(java.lang.Object, org.vmmagic.unboxed.Offset)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deflate</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.307">deflate</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o,
           <a href="../../../org/vmmagic/unboxed/Offset.html" title="class in org.vmmagic.unboxed">Offset</a>&nbsp;lockOffset)</pre>
<div class="block">Disassociates this heavy-weight lock from the indicated object.
 This lock is not held, nor are any threads on its queues.  Note:
 the mutex for this lock is held when deflate is called.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>o</code> - the object from which this lock is to be disassociated</dd></dl>
</li>
</ul>
<a name="setOwnerId(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setOwnerId</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.324">setOwnerId</a>(int&nbsp;id)</pre>
<div class="block">Set the owner of a lock</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The thread id of the owner.</dd></dl>
</li>
</ul>
<a name="getOwnerId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOwnerId</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.331">getOwnerId</a>()</pre>
<div class="block">Get the thread id of the current owner of the lock.</div>
</li>
</ul>
<a name="setRecursionCount(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRecursionCount</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.338">setRecursionCount</a>(int&nbsp;c)</pre>
<div class="block">Update the lock's recursion count.</div>
</li>
</ul>
<a name="getRecursionCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecursionCount</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.345">getRecursionCount</a>()</pre>
<div class="block">Get the lock's recursion count.</div>
</li>
</ul>
<a name="setLockedObject(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLockedObject</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.352">setLockedObject</a>(<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</pre>
<div class="block">Set the object that this lock is referring to.</div>
</li>
</ul>
<a name="getLockedObject()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLockedObject</h4>
<pre>public&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.359">getLockedObject</a>()</pre>
<div class="block">Get the object that this lock is referring to.</div>
</li>
</ul>
<a name="dumpBlockedThreads()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpBlockedThreads</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.366">dumpBlockedThreads</a>()</pre>
<div class="block">Dump threads blocked trying to get this lock</div>
</li>
</ul>
<a name="dumpWaitingThreads()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpWaitingThreads</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.373">dumpWaitingThreads</a>()</pre>
<div class="block">Dump threads waiting to be notified on this lock</div>
</li>
</ul>
<a name="dump()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dump</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.381">dump</a>()</pre>
<div class="block">Reports the state of a heavy-weight lock, via <a href="../../../org/jikesrvm/VM.html#sysWrite(org.jikesrvm.classloader.Atom)"><code>VM.sysWrite(org.jikesrvm.classloader.Atom)</code></a>.</div>
</li>
</ul>
<a name="isBlocked(org.jikesrvm.scheduler.RVMThread)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBlocked</h4>
<pre>protected&nbsp;boolean&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.418">isBlocked</a>(<a href="../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;t)</pre>
<div class="block">Is this lock blocking thread t?</div>
</li>
</ul>
<a name="isWaiting(org.jikesrvm.scheduler.RVMThread)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWaiting</h4>
<pre>protected&nbsp;boolean&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.425">isWaiting</a>(<a href="../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;t)</pre>
<div class="block">Is this thread t waiting on this lock?</div>
</li>
</ul>
<a name="init()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.437">init</a>()</pre>
<div class="block">Sets up the data structures for holding heavy-weight locks.</div>
</li>
</ul>
<a name="allocate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>static&nbsp;<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.462">allocate</a>()</pre>
<div class="block">Delivers up an unassigned heavy-weight lock.  Locks are allocated
 from processor specific regions or lists, so normally no synchronization
 is required to obtain a lock.
 <p>
 Collector threads cannot use heavy-weight locks.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a free Lock; or <code>null</code>, if garbage collection is not enabled</dd></dl>
</li>
</ul>
<a name="free(org.jikesrvm.scheduler.Lock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>protected static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.531">free</a>(<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;l)</pre>
<div class="block">Recycles an unused heavy-weight lock.  Locks are deallocated
 to processor specific lists, so normally no synchronization
 is required to obtain or release a lock.</div>
</li>
</ul>
<a name="returnLock(org.jikesrvm.scheduler.Lock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>returnLock</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.550">returnLock</a>(<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;l)</pre>
</li>
</ul>
<a name="growLocks(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>growLocks</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.568">growLocks</a>(int&nbsp;id)</pre>
<div class="block">Grow the locks table by allocating a new spine chunk.</div>
</li>
</ul>
<a name="numLocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numLocks</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.596">numLocks</a>()</pre>
<div class="block">Return the number of lock slots that have been allocated. This provides
 the range of valid lock ids.</div>
</li>
</ul>
<a name="getLock(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLock</h4>
<pre>public static&nbsp;<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.607">getLock</a>(int&nbsp;id)</pre>
<div class="block">Read a lock from the lock table by id.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The lock id</dd>
<dt><span class="strong">Returns:</span></dt><dd>The lock object.</dd></dl>
</li>
</ul>
<a name="addLock(org.jikesrvm.scheduler.Lock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLock</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.617">addLock</a>(<a href="../../../org/jikesrvm/scheduler/Lock.html" title="class in org.jikesrvm.scheduler">Lock</a>&nbsp;l)</pre>
<div class="block">Add a lock to the lock table</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>l</code> - The lock object</dd></dl>
</li>
</ul>
<a name="dumpLocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpLocks</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.626">dumpLocks</a>()</pre>
<div class="block">Dump the lock table.</div>
</li>
</ul>
<a name="countLocksHeldByThread(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countLocksHeldByThread</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.648">countLocksHeldByThread</a>(int&nbsp;id)</pre>
<div class="block">Count number of locks held by thread</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the thread locking ID we're counting for</dd>
<dt><span class="strong">Returns:</span></dt><dd>number of locks held</dd></dl>
</li>
</ul>
<a name="getThreadState(org.jikesrvm.scheduler.RVMThread)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThreadState</h4>
<pre>public static&nbsp;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.663">getThreadState</a>(<a href="../../../org/jikesrvm/scheduler/RVMThread.html" title="class in org.jikesrvm.scheduler">RVMThread</a>&nbsp;t)</pre>
<div class="block">scan lock queues for thread and report its state</div>
</li>
</ul>
<a name="boot()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>boot</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../src-html/org/jikesrvm/scheduler/Lock.html#line.681">boot</a>()</pre>
<div class="block">Set up callbacks to report statistics.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Lock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jikesrvm/scheduler/LightMonitor.html" title="class in org.jikesrvm.scheduler"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jikesrvm/scheduler/Lock.AppRunStartMonitor.html" title="class in org.jikesrvm.scheduler"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jikesrvm/scheduler/Lock.html" target="_top">Frames</a></li>
<li><a href="Lock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
