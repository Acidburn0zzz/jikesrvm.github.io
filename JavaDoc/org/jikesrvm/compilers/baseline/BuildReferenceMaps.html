<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>BuildReferenceMaps (Jikes RVM API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BuildReferenceMaps (Jikes RVM API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BuildReferenceMaps.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jikesrvm/compilers/baseline/BuildBB.InstructionType.html" title="enum in org.jikesrvm.compilers.baseline"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.PrimitiveSize.html" title="enum in org.jikesrvm.compilers.baseline"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jikesrvm/compilers/baseline/BuildReferenceMaps.html" target="_top">Frames</a></li>
<li><a href="BuildReferenceMaps.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jikesrvm.compilers.baseline</div>
<h2 title="Class BuildReferenceMaps" class="title">Class BuildReferenceMaps</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.jikesrvm.compilers.baseline.BuildReferenceMaps</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>final class <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.42">BuildReferenceMaps</a>
extends <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">This class builds the reference and non-reference maps for a given method.
 The maps are recorded with ReferenceMaps. This class works with the baseline
 compiler, calculating the maps for local variables (including parameters),
 and the java operand stack. Given the basic blocks mapped out by BuildBB
 determine for each GC point (call sites and new's, etc) what the stack and
 variable maps are. Note that this class deals with reference maps (the term
 "stack maps" was not used as it is too ambiguous - does "stack" refer to the
 java operand stack or a C-like stack?; when processing java bytecodes it
 seemed best to use "stack" for java operand stack.)</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.PrimitiveSize.html" title="enum in org.jikesrvm.compilers.baseline">BuildReferenceMaps.PrimitiveSize</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#JSRSubNext">JSRSubNext</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#NON_REFERENCE">NON_REFERENCE</a></span></code>
<div class="block">The entry in the reference map contains a value that is not a reference.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#NOT_SET">NOT_SET</a></span></code>
<div class="block">The entry in the reference map is not set in a JSR body.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#REFERENCE">REFERENCE</a></span></code>
<div class="block">The entry in the reference map contains a value that is a reference.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#RETURN_ADDRESS">RETURN_ADDRESS</a></span></code>
<div class="block">The entry in the reference map contains a JSR return address.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#SET_TO_NONREFERENCE">SET_TO_NONREFERENCE</a></span></code>
<div class="block">The entry in the reference map is set to a value that is not a reference within a JSR body.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#SET_TO_REFERENCE">SET_TO_REFERENCE</a></span></code>
<div class="block">The entry in the reference map is set to a value that is a reference within a JSR body.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#workStkTop">workStkTop</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#BuildReferenceMaps--">BuildReferenceMaps</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private short[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#addToWorkStk-short-short:A-">addToWorkStk</a></span>(short&nbsp;blockNum,
            short[]&nbsp;workStk)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private short[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#addUniqueToWorkStk-short-short:A-">addUniqueToWorkStk</a></span>(short&nbsp;blockNum,
                  short[]&nbsp;workStk)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#buildReferenceMaps-org.jikesrvm.classloader.NormalMethod-int:A-byte:A-org.jikesrvm.compilers.baseline.ReferenceMaps-org.jikesrvm.compilers.baseline.BuildBB-">buildReferenceMaps</a></span>(<a href="../../../../org/jikesrvm/classloader/NormalMethod.html" title="class in org.jikesrvm.classloader">NormalMethod</a>&nbsp;method,
                  int[]&nbsp;stackHeights,
                  byte[]&nbsp;localTypes,
                  <a href="../../../../org/jikesrvm/compilers/baseline/ReferenceMaps.html" title="class in org.jikesrvm.compilers.baseline">ReferenceMaps</a>&nbsp;referenceMaps,
                  <a href="../../../../org/jikesrvm/compilers/baseline/BuildBB.html" title="class in org.jikesrvm.compilers.baseline">BuildBB</a>&nbsp;buildBB)</code>
<div class="block">After the analysis of the blocks of a method, examine the byte codes again, to
 determine the reference maps for the gc points.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private short[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#computeJSRNextMaps-short-int-int-boolean-byte:A:A-int:A-org.jikesrvm.compilers.baseline.JSRSubroutineInfo:A-int-short:A-">computeJSRNextMaps</a></span>(short&nbsp;nextBBNum,
                  int&nbsp;maplength,
                  int&nbsp;JSRSubIndex,
                  boolean&nbsp;JSRisinJSRSub,
                  byte[][]&nbsp;bbMaps,
                  int[]&nbsp;blockStkTop,
                  <a href="../../../../org/jikesrvm/compilers/baseline/JSRSubroutineInfo.html" title="class in org.jikesrvm.compilers.baseline">JSRSubroutineInfo</a>[]&nbsp;JSRSubs,
                  int&nbsp;currBBStkEmpty,
                  short[]&nbsp;workStk)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private short[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#processBranchBB-short-int-byte:A-int-boolean-byte:A:A-int:A-org.jikesrvm.compilers.baseline.PendingRETInfo-org.jikesrvm.compilers.baseline.PendingRETInfo:A-short:A-">processBranchBB</a></span>(short&nbsp;brBBNum,
               int&nbsp;currBBStkTop,
               byte[]&nbsp;currBBMap,
               int&nbsp;currBBStkEmpty,
               boolean&nbsp;inJSRSub,
               byte[][]&nbsp;bbMaps,
               int[]&nbsp;blockStkTop,
               <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>&nbsp;currPendingRET,
               <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>[]&nbsp;bbPendingRETs,
               short[]&nbsp;workStk)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#processInvoke-org.jikesrvm.classloader.MethodReference-int-int-byte:A-boolean-boolean-org.jikesrvm.compilers.baseline.ReferenceMaps-org.jikesrvm.compilers.baseline.PendingRETInfo-boolean-int-">processInvoke</a></span>(<a href="../../../../org/jikesrvm/classloader/MethodReference.html" title="class in org.jikesrvm.classloader">MethodReference</a>&nbsp;target,
             int&nbsp;byteindex,
             int&nbsp;currBBStkTop,
             byte[]&nbsp;currBBMap,
             boolean&nbsp;isStatic,
             boolean&nbsp;inJSRSub,
             <a href="../../../../org/jikesrvm/compilers/baseline/ReferenceMaps.html" title="class in org.jikesrvm.compilers.baseline">ReferenceMaps</a>&nbsp;referenceMaps,
             <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>&nbsp;currPendingRET,
             boolean&nbsp;blockSeen,
             int&nbsp;currBBStkEmpty)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private short[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#processJSR-int-int-short-short-byte:A:A-int-byte:A-int-int:A-org.jikesrvm.compilers.baseline.PendingRETInfo:A-org.jikesrvm.compilers.baseline.PendingRETInfo-org.jikesrvm.compilers.baseline.JSRSubroutineInfo:A-short:A-">processJSR</a></span>(int&nbsp;JSRBBNum,
          int&nbsp;JSRSubStartIndex,
          short&nbsp;brBBNum,
          short&nbsp;nextBBNum,
          byte[][]&nbsp;bbMaps,
          int&nbsp;currBBStkTop,
          byte[]&nbsp;currBBMap,
          int&nbsp;currBBStkEmpty,
          int[]&nbsp;blockStkTop,
          <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>[]&nbsp;bbPendingRETs,
          <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>&nbsp;currPendingRET,
          <a href="../../../../org/jikesrvm/compilers/baseline/JSRSubroutineInfo.html" title="class in org.jikesrvm.compilers.baseline">JSRSubroutineInfo</a>[]&nbsp;JSRSubs,
          short[]&nbsp;workStk)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#setHandlersMapsNonRef-int-org.jikesrvm.compilers.baseline.BuildReferenceMaps.PrimitiveSize-int:A-int-boolean-byte:A:A-">setHandlersMapsNonRef</a></span>(int&nbsp;localVariable,
                     <a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.PrimitiveSize.html" title="enum in org.jikesrvm.compilers.baseline">BuildReferenceMaps.PrimitiveSize</a>&nbsp;wordCount,
                     int[]&nbsp;reachableHandlerBBNums,
                     int&nbsp;reachableHandlerCount,
                     boolean&nbsp;inJSRSub,
                     byte[][]&nbsp;bbMaps)</code>
<div class="block">For each of the reachable handlers (catch blocks) from the try block, track that
 the local variable given by the index with 1 or 2 words, has been set to a
 non reference value (eg int, float, etc)</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#setHandlersMapsRef-int-int:A-int-byte:A:A-">setHandlersMapsRef</a></span>(int&nbsp;localVariable,
                  int[]&nbsp;reachableHandlerBBNums,
                  int&nbsp;reachableHandlerCount,
                  byte[][]&nbsp;bbMaps)</code>
<div class="block">For each of the reachable handlers (catch blocks) from the try block,
 track that
 the local variable given by the index,  has been set to a reference value.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#setHandlersMapsReturnAddress-int-int:A-int-byte:A:A-">setHandlersMapsReturnAddress</a></span>(int&nbsp;localVariable,
                            int[]&nbsp;reachableHandlerBBNums,
                            int&nbsp;reachableHandlerCount,
                            byte[][]&nbsp;bbMaps)</code>
<div class="block">For each of the reachable handlers (catch blocks)
 from the try block, track that
 the local variable given by the index,
 has been set to a return address value.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NON_REFERENCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NON_REFERENCE</h4>
<pre>static final&nbsp;byte <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.47">NON_REFERENCE</a></pre>
<div class="block">The entry in the reference map contains a value that is not a reference.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.compilers.baseline.BuildReferenceMaps.NON_REFERENCE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REFERENCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REFERENCE</h4>
<pre>static final&nbsp;byte <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.51">REFERENCE</a></pre>
<div class="block">The entry in the reference map contains a value that is a reference.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.compilers.baseline.BuildReferenceMaps.REFERENCE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="RETURN_ADDRESS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RETURN_ADDRESS</h4>
<pre>static final&nbsp;byte <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.55">RETURN_ADDRESS</a></pre>
<div class="block">The entry in the reference map contains a JSR return address.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.compilers.baseline.BuildReferenceMaps.RETURN_ADDRESS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NOT_SET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NOT_SET</h4>
<pre>static final&nbsp;byte <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.59">NOT_SET</a></pre>
<div class="block">The entry in the reference map is not set in a JSR body.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.compilers.baseline.BuildReferenceMaps.NOT_SET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SET_TO_REFERENCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SET_TO_REFERENCE</h4>
<pre>static final&nbsp;byte <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.63">SET_TO_REFERENCE</a></pre>
<div class="block">The entry in the reference map is set to a value that is a reference within a JSR body.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.compilers.baseline.BuildReferenceMaps.SET_TO_REFERENCE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SET_TO_NONREFERENCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SET_TO_NONREFERENCE</h4>
<pre>static final&nbsp;byte <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.67">SET_TO_NONREFERENCE</a></pre>
<div class="block">The entry in the reference map is set to a value that is not a reference within a JSR body.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.jikesrvm.compilers.baseline.BuildReferenceMaps.SET_TO_NONREFERENCE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="workStkTop">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>workStkTop</h4>
<pre>int <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.75">workStkTop</a></pre>
</li>
</ul>
<a name="JSRSubNext">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JSRSubNext</h4>
<pre>int <a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.76">JSRSubNext</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BuildReferenceMaps--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BuildReferenceMaps</h4>
<pre><a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.42">BuildReferenceMaps</a>()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="buildReferenceMaps-org.jikesrvm.classloader.NormalMethod-int:A-byte:A-org.jikesrvm.compilers.baseline.ReferenceMaps-org.jikesrvm.compilers.baseline.BuildBB-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildReferenceMaps</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.94">buildReferenceMaps</a>(<a href="../../../../org/jikesrvm/classloader/NormalMethod.html" title="class in org.jikesrvm.classloader">NormalMethod</a>&nbsp;method,
                               int[]&nbsp;stackHeights,
                               byte[]&nbsp;localTypes,
                               <a href="../../../../org/jikesrvm/compilers/baseline/ReferenceMaps.html" title="class in org.jikesrvm.compilers.baseline">ReferenceMaps</a>&nbsp;referenceMaps,
                               <a href="../../../../org/jikesrvm/compilers/baseline/BuildBB.html" title="class in org.jikesrvm.compilers.baseline">BuildBB</a>&nbsp;buildBB)</pre>
<div class="block">After the analysis of the blocks of a method, examine the byte codes again, to
 determine the reference maps for the gc points. Record the maps with
 referenceMaps.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>method</code> - the method whose bytecodes are to be examined again</dd>
<dd><code>stackHeights</code> - height of the expression stack at each bytecode</dd>
<dd><code>localTypes</code> - the types that the locals can take</dd>
<dd><code>referenceMaps</code> - the reference map. NB: the map's constructor is still running
  while this method is called!</dd>
<dd><code>buildBB</code> - the buildBB instance that contains the results from the
  previous analysis</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/jikesrvm/compilers/baseline/BaselineCompiler.html#localTypes"><code>BaselineCompiler.localTypes</code></a>, 
<a href="../../../../org/jikesrvm/compilers/baseline/TemplateCompilerFramework.html#stackHeights"><code>TemplateCompilerFramework.stackHeights</code></a></dd>
</dl>
</li>
</ul>
<a name="addToWorkStk-short-short:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToWorkStk</h4>
<pre>private&nbsp;short[]&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2034">addToWorkStk</a>(short&nbsp;blockNum,
                             short[]&nbsp;workStk)</pre>
</li>
</ul>
<a name="addUniqueToWorkStk-short-short:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addUniqueToWorkStk</h4>
<pre>private&nbsp;short[]&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2048">addUniqueToWorkStk</a>(short&nbsp;blockNum,
                                   short[]&nbsp;workStk)</pre>
</li>
</ul>
<a name="processBranchBB-short-int-byte:A-int-boolean-byte:A:A-int:A-org.jikesrvm.compilers.baseline.PendingRETInfo-org.jikesrvm.compilers.baseline.PendingRETInfo:A-short:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processBranchBB</h4>
<pre>private&nbsp;short[]&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2071">processBranchBB</a>(short&nbsp;brBBNum,
                                int&nbsp;currBBStkTop,
                                byte[]&nbsp;currBBMap,
                                int&nbsp;currBBStkEmpty,
                                boolean&nbsp;inJSRSub,
                                byte[][]&nbsp;bbMaps,
                                int[]&nbsp;blockStkTop,
                                <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>&nbsp;currPendingRET,
                                <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>[]&nbsp;bbPendingRETs,
                                short[]&nbsp;workStk)</pre>
</li>
</ul>
<a name="processInvoke-org.jikesrvm.classloader.MethodReference-int-int-byte:A-boolean-boolean-org.jikesrvm.compilers.baseline.ReferenceMaps-org.jikesrvm.compilers.baseline.PendingRETInfo-boolean-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processInvoke</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2123">processInvoke</a>(<a href="../../../../org/jikesrvm/classloader/MethodReference.html" title="class in org.jikesrvm.classloader">MethodReference</a>&nbsp;target,
                          int&nbsp;byteindex,
                          int&nbsp;currBBStkTop,
                          byte[]&nbsp;currBBMap,
                          boolean&nbsp;isStatic,
                          boolean&nbsp;inJSRSub,
                          <a href="../../../../org/jikesrvm/compilers/baseline/ReferenceMaps.html" title="class in org.jikesrvm.compilers.baseline">ReferenceMaps</a>&nbsp;referenceMaps,
                          <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>&nbsp;currPendingRET,
                          boolean&nbsp;blockSeen,
                          int&nbsp;currBBStkEmpty)</pre>
</li>
</ul>
<a name="processJSR-int-int-short-short-byte:A:A-int-byte:A-int-int:A-org.jikesrvm.compilers.baseline.PendingRETInfo:A-org.jikesrvm.compilers.baseline.PendingRETInfo-org.jikesrvm.compilers.baseline.JSRSubroutineInfo:A-short:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processJSR</h4>
<pre>private&nbsp;short[]&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2190">processJSR</a>(int&nbsp;JSRBBNum,
                           int&nbsp;JSRSubStartIndex,
                           short&nbsp;brBBNum,
                           short&nbsp;nextBBNum,
                           byte[][]&nbsp;bbMaps,
                           int&nbsp;currBBStkTop,
                           byte[]&nbsp;currBBMap,
                           int&nbsp;currBBStkEmpty,
                           int[]&nbsp;blockStkTop,
                           <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>[]&nbsp;bbPendingRETs,
                           <a href="../../../../org/jikesrvm/compilers/baseline/PendingRETInfo.html" title="class in org.jikesrvm.compilers.baseline">PendingRETInfo</a>&nbsp;currPendingRET,
                           <a href="../../../../org/jikesrvm/compilers/baseline/JSRSubroutineInfo.html" title="class in org.jikesrvm.compilers.baseline">JSRSubroutineInfo</a>[]&nbsp;JSRSubs,
                           short[]&nbsp;workStk)</pre>
</li>
</ul>
<a name="computeJSRNextMaps-short-int-int-boolean-byte:A:A-int:A-org.jikesrvm.compilers.baseline.JSRSubroutineInfo:A-int-short:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeJSRNextMaps</h4>
<pre>private&nbsp;short[]&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2241">computeJSRNextMaps</a>(short&nbsp;nextBBNum,
                                   int&nbsp;maplength,
                                   int&nbsp;JSRSubIndex,
                                   boolean&nbsp;JSRisinJSRSub,
                                   byte[][]&nbsp;bbMaps,
                                   int[]&nbsp;blockStkTop,
                                   <a href="../../../../org/jikesrvm/compilers/baseline/JSRSubroutineInfo.html" title="class in org.jikesrvm.compilers.baseline">JSRSubroutineInfo</a>[]&nbsp;JSRSubs,
                                   int&nbsp;currBBStkEmpty,
                                   short[]&nbsp;workStk)</pre>
</li>
</ul>
<a name="setHandlersMapsNonRef-int-org.jikesrvm.compilers.baseline.BuildReferenceMaps.PrimitiveSize-int:A-int-boolean-byte:A:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHandlersMapsNonRef</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2307">setHandlersMapsNonRef</a>(int&nbsp;localVariable,
                                   <a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.PrimitiveSize.html" title="enum in org.jikesrvm.compilers.baseline">BuildReferenceMaps.PrimitiveSize</a>&nbsp;wordCount,
                                   int[]&nbsp;reachableHandlerBBNums,
                                   int&nbsp;reachableHandlerCount,
                                   boolean&nbsp;inJSRSub,
                                   byte[][]&nbsp;bbMaps)</pre>
<div class="block">For each of the reachable handlers (catch blocks) from the try block, track that
 the local variable given by the index with 1 or 2 words, has been set to a
 non reference value (eg int, float, etc)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>localVariable</code> - Variable index in the map</dd>
<dd><code>wordCount</code> - 2 for doubles and longs, 1 otherwise</dd>
<dd><code>reachableHandlerBBNums</code> - The array with all the block numbers of
                                  reachable handlers</dd>
<dd><code>reachableHandlerCount</code> - 0 through <code>reachableHandlerCount
                                   - 1 </code> will all be valid
                                  array indices</dd>
<dd><code>inJSRSub</code> - TODO Document ME XXX</dd>
<dd><code>bbMaps</code> - TODO Document ME XXX</dd>
</dl>
</li>
</ul>
<a name="setHandlersMapsRef-int-int:A-int-byte:A:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHandlersMapsRef</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2348">setHandlersMapsRef</a>(int&nbsp;localVariable,
                                int[]&nbsp;reachableHandlerBBNums,
                                int&nbsp;reachableHandlerCount,
                                byte[][]&nbsp;bbMaps)</pre>
<div class="block">For each of the reachable handlers (catch blocks) from the try block,
 track that
 the local variable given by the index,  has been set to a reference value.
 Only call this method if the try block is in a JSR subroutine.
 If a non-reference value becomes a reference value,
 then it can not be used as
 as reference value within the handler
 (there is a path to the handler where the
 value is not a reference) so mark the local variable as
 a non-reference if we
 are tracking the difference maps (for a JSR subroutine).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>localVariable</code> - Variable index in the map</dd>
<dd><code>reachableHandlerBBNums</code> - The array with all the block numbers of
                                  reachable handlers</dd>
<dd><code>reachableHandlerCount</code> - 0 through <code>reachableHandlerCount
                                   - 1 </code> will all be valid
                                  array indices</dd>
<dd><code>bbMaps</code> - TODO Document ME XXX</dd>
</dl>
</li>
</ul>
<a name="setHandlersMapsReturnAddress-int-int:A-int-byte:A:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setHandlersMapsReturnAddress</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/jikesrvm/compilers/baseline/BuildReferenceMaps.html#line.2381">setHandlersMapsReturnAddress</a>(int&nbsp;localVariable,
                                          int[]&nbsp;reachableHandlerBBNums,
                                          int&nbsp;reachableHandlerCount,
                                          byte[][]&nbsp;bbMaps)</pre>
<div class="block">For each of the reachable handlers (catch blocks)
 from the try block, track that
 the local variable given by the index,
 has been set to a return address value.
 Only call this routine within a JSR subroutine.
 If a non-reference, or reference value becomes a return address value,
 then it
 cannot be used as any of these values within the handler
 (there is a path to
 the handler where the value is not an internal reference,
 and a path where it
 is an internal reference) so mark the local variable as a
 non-reference if we
 are tracking the difference maps (for a JSR subroutine).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>localVariable</code> - variable index in the map</dd>
<dd><code>reachableHandlerBBNums</code> - the array with all the block numbers of
                                  reachable handlers</dd>
<dd><code>reachableHandlerCount</code> - 0 through <code>reachableHandlerCount
                                   - 1 </code> will all be valid
                                  array indices</dd>
<dd><code>bbMaps</code> - TODO Document ME XXX</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BuildReferenceMaps.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jikesrvm/compilers/baseline/BuildBB.InstructionType.html" title="enum in org.jikesrvm.compilers.baseline"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/jikesrvm/compilers/baseline/BuildReferenceMaps.PrimitiveSize.html" title="enum in org.jikesrvm.compilers.baseline"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jikesrvm/compilers/baseline/BuildReferenceMaps.html" target="_top">Frames</a></li>
<li><a href="BuildReferenceMaps.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
