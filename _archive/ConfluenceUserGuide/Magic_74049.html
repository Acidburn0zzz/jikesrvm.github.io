<!DOCTYPE html>
<html>
    <head>
        <title>RVM : Magic</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RVM</a></span>
                            </li>
                                                    <li>
                                <span><a href="User-Guide_73933.html">User Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="Architecture_73917.html">Architecture</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RVM : Magic
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> Peter Donald</span>, last modified by <span class='editor'> David Grove</span> on Jul 03, 2008
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Most Java runtimes rely upon the foreign language APIs of the underlying platform operating system to implement runtime behaviour which involves interaction with the underlying platform. Runtimes also occasionally employ small segments of machine code to provide access to platform hardware state. Note that this is expedient rather than mandatory. With a suitably smart Java bytecode compiler it would be quite possible to implement a full Java-in-Java runtime i.e. one comprising only compiled Java code (the JNode project is an attempt to implement a runtime along these lines; the Xerox, MIT, Lambda and TI Explorer Lisp machine implementations and the Xerox Smalltalk implementation were highly successful attemtps at fully compiled language runtimes).</p>

<p>This section provides information on <img class="emoticon emoticon-red-star" src="images/icons/emoticons/star_red.png" data-emoticon-name="red-star" alt="(red star)"/> magic <img class="emoticon emoticon-red-star" src="images/icons/emoticons/star_red.png" data-emoticon-name="red-star" alt="(red star)"/> which is an escape hatch that Jikes<a href="http://docs.codehaus.org/display/RVM/Trademarks">™</a> RVM provides to implement functionality that is not possible using the pure Java<a href="http://docs.codehaus.org/display/RVM/Trademarks">™</a> programming language. For example, the Jikes RVM garbage collectors and runtime system must, on occasion, access memory or perform unsafe casts. The compiler will also translate a call to Magic.threadSwitch() into a sequence of machine code that swaps out old thread registers and swaps in new ones, switching execution to the new thread's stack resumed at its saved PC</p>

<p>There are three mechanisms via which the Jikes RVM <img class="emoticon emoticon-red-star" src="images/icons/emoticons/star_red.png" data-emoticon-name="red-star" alt="(red star)"/> magic <img class="emoticon emoticon-red-star" src="images/icons/emoticons/star_red.png" data-emoticon-name="red-star" alt="(red star)"/> is implemented:</p>
<ul>
	<li><a href="Compiler-Intrinsics_74050.html">Compiler Intrinsics</a>: Most methods are within class librarys but some functions are built in (that is, intrinsic) to the compiler. These are referred to as intrinsic functions or intrinsics.</li>
	<li><a class="createlink" href="/pages/createpage.action?spaceKey=RVM&amp;title=Compiler+Pragmas&amp;linkCreation=true&amp;fromPageId=74049">Compiler Pragmas</a>: Some intrinsics are do not provide any behaviour but instead provide information to the compiler that modifies optimizations, calling conventions and activation frame layout. We rever to these mechanisms as compiler pragmas.</li>
	<li><a href="Unboxed-Types_74052.html">Unboxed Types</a>: Besides the primitive types, all Java values are boxed types. Conceptually, they are represented by a pointer to a heap object. However, an unboxed type is represented by the value itself. All methods on an unboxed type must be <a href="Compiler-Intrinsics_74050.html">Compiler Intrinsics</a>.</li>
</ul>


<p>The mechanisms are used to implement the following functionality;</p>
<ul>
	<li><a href="Raw-Memory-Access_74055.html">Raw Memory Access</a>: Unfetted access to memory.</li>
	<li><a href="Uninterruptible-Code_74057.html">Uninterruptible Code</a>: Declaring code to be uninterruptible.</li>
	<li><a class="createlink" href="/pages/createpage.action?spaceKey=RVM&amp;title=Alternative+Calling+Conventions&amp;linkCreation=true&amp;fromPageId=74049">Alternative Calling Conventions</a>: Declaring different calling conventions and activation frame layout.</li>
</ul>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Apr 01, 2015 16:25</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
